import{d as U,j as h,s as O,v as q,x as V,y as A,c as j,a as e,n as B,t as r,r as H,k as z,o as m,_ as R,f as W,h as Y,w as G,z as a,q as J,m as D,F as I,A as K,l as Q,u as X,i as Z,B as ee,C as te,D as ae,p as oe,b as se}from"./index-mQMgR6vA.js";import{s as _}from"./supabase-bBn21qmd.js";import{E as ne}from"./ErrorBox-_m5U260i.js";import{g as M}from"./generate_uuid-F73_iyBE.js";const re=U({__name:"Dialogue",props:{title:String,content:String,theme:String,opened:Boolean},setup(n){const x=n,t=h(!1),c=h(!1),d=O(x,"opened"),i=()=>t.value=!t.value,o=()=>c.value=!1;return q(d,()=>{c.value=!c.value}),(w,p)=>V((m(),j("div",{class:"backdrop",onClick:z(o,["self"])},[e("div",{class:B({modal:!0,cpb:n.theme==="corporate-bullshit"})},[e("i",{class:B(["fa-solid",t.value?"fa-circle-xmark":"fa-xmark",t.value?"fa-1.5x":""]),onMouseover:i,onMouseout:i,onClick:o},null,34),e("h1",null,r(n.title),1),e("p",null,r(n.content),1),H(w.$slots,"default",{},void 0,!0)],2)],512)),[[A,c.value]])}}),le=R(re,[["__scopeId","data-v-1d920dad"]]),S=n=>(oe("data-v-aca7fec0"),n=n(),se(),n),ce={style:{"font-size":"1.5rem",margin:"0"}},ie=["placeholder"],ue=S(()=>e("br",null,null,-1)),de=S(()=>e("br",null,null,-1)),pe={class:"user"},_e={class:"userblock"},me=["src"],he={class:"projects"},ve={class:"big"},fe=S(()=>e("i",{class:"fa-solid fa-add"},null,-1)),ge={class:"project-panel"},je={key:0,class:"blank"},we=["onClick"],be=U({__name:"Projects",props:{language:String},setup(n){const x=n,t=W(()=>{switch(x.language){case"en":return{projects:"Projects",new_project:"New Project",untitled_project:"Untitled Project",loading:"Loading...",no_project:"No Projects Found... Maybe create a new one?",project_name:"Project Name",sign_out:"Sign Out"};default:return{projects:"โปรเจกต์",project_name:"โปรเจกต์ชื่อว่า...",new_project:"สร้างโปรเจกต์ใหม่",untitled_project:"ไม่มีชื่อ",loading:"โหลดอยู่ค้าบ",no_project:"ไม่มีโปรเจกต์เลย... ลองสร้างก่อนไหม :]",sign_out:"ออกละ ไม่อยู่ละ"}}});let c=h(!1),d=h({}),i=null,o=h("");const w=X(),p=Z();let E=_.auth.getUser().then(s=>{s.error&&(console.clear(),p.push("/sign-up"))});!w.hash&&!E?p.push("/sign-up"):(w.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:s}}=await _.auth.getUser();d.value=s})());const C=()=>{c.value=!c.value},F=async()=>{let{error:s}=await _.auth.signOut();if(s)return i="You are stuck here. No changing.",i;p.push("/")},P=async s=>{C();const u=[{uid:d.value.id,status:"owner"}],{data:y,error:v}=await _.from("Teams").insert([{team_members:u}]).select();if(v)return i="Please wait until we have a stable connection to the database.",v;const k=y[0].id,{data:f,error:g}=await _.from("Projects").insert([{name:s??"Untitled Project",type:"slide",content:{metadata:{width:"1920px",height:"1080px"},data:[{id:M(),content:[{id:M(),tag:"h1",content:"Hello!",position:{x:69,y:420}}]}]},team_id:k}]).select();if(g)return i="Please wait until we have a stable connection to the database.",g;p.push(`/${f[0].type}/${f[0].id}`)},T=async s=>{p.push(`/${s.type}/${s.id}`)};let b=h({data:{},error:null});return(async()=>b.value=await _.from("Projects").select("name,id,type"))(),(s,u)=>{var y,v,k,f,g,$,N;return m(),j(I,null,[Y(le,{title:t.value.new_project,opened:a(c)},{default:G(()=>[e("p",ce,r(t.value.project_name),1),e("form",{onSubmit:u[2]||(u[2]=z(l=>P(a(o)?a(o):t.value.no_project),["prevent"]))},[V(e("input",{type:"text",placeholder:t.value.untitled_project,"onUpdate:modelValue":u[0]||(u[0]=l=>te(o)?o.value=l:o=l)},null,8,ie),[[ee,a(o)]]),ue,de,e("button",{class:"new bouncy",onClick:u[1]||(u[1]=l=>P(a(o)?a(o):t.value.no_project))},r(t.value.new_project+"!"),1)],32)]),_:1},8,["title","opened"]),e("div",pe,[e("div",_e,[e("img",{class:"profile",src:((v=(y=a(d))==null?void 0:y.user_metadata)==null?void 0:v.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,me),e("h1",null,r(((f=(k=a(d))==null?void 0:k.user_metadata)==null?void 0:f.name)??t.value.loading),1)]),e("button",{class:"sign-out",onClick:F},r(t.value.sign_out),1)]),e("div",he,[e("h1",ve,r(t.value.projects),1),e("button",{onClick:C,class:"bouncy"},[fe,J(" "+r(t.value.new_project),1)])]),e("div",ge,[(g=a(b))!=null&&g.data[0]?D("",!0):(m(),j("p",je,r(t.value.no_project),1)),(m(!0),j(I,null,K(($=a(b))==null?void 0:$.data,(l,L)=>(m(),j("div",{class:"project bouncy",style:ae(`--anim-order: ${L}`),onClick:ye=>T(l)},[e("p",null,r((l==null?void 0:l.name)??"What the fuck is in ur config?"),1)],12,we))),256))]),a(i)?(m(),Q(ne,{key:0,msg:(N=a(b))==null?void 0:N.error},null,8,["msg"])):D("",!0)],64)}}}),Pe=R(be,[["__scopeId","data-v-aca7fec0"]]);export{Pe as default};

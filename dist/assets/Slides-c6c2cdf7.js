import{d as ge,j as ut,c as me,a as W,n as ne,t as Ot,q as ti,F as ji,o as ye,_ as ei,G as Zi,H as Qi,h as ii,z as oe,u as $i,e as Ki,i as ke}from"./index-294521a4.js";import{s as Ji}from"./supabase-c16b9071.js";const tr=ge({__name:"Metadata",props:{name:String,width:String,height:String,language:String},setup(t){const e=ut(!0),i=()=>{e.value=!e.value};return(r,s)=>(ye(),me(ji,null,[W("div",{class:ne(["metadata",e.value?"op":"cl"])},[W("div",{class:ne(["content",e.value?"op":"cl"])},[W("h1",null,Ot(t.name),1),W("p",null,[W("strong",null,Ot(t.language=="en"?"Size":"ขนาด")+":",1),ti(" "+Ot(t.width)+" x "+Ot(t.height),1)])],2)],2),W("i",{class:ne(["fa-solid","fa-chevron-up","fa-xs","chevron",e.value?"op":"cl"]),onClick:i},null,2)],64))}});const er=ei(tr,[["__scopeId","data-v-51ed7433"]]);/**
* Muuri v0.9.5
* https://muuri.dev/
* Copyright (c) 2015-present, Haltu Oy
* Released under the MIT license
* https://github.com/haltu/muuri/blob/master/LICENSE.md
* @license MIT
*
* Muuri Packer
* Copyright (c) 2016-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri Ticker / Muuri Emitter / Muuri Dragger
* Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri AutoScroller
* Copyright (c) 2019-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*/var Qt={},dt=typeof Map=="function"?new Map:null,j="swap",ft="move",ir="synchronize",nt="layoutStart",Ce="layoutEnd",Pe="layoutAbort",Me="add",Oe="remove",rr="showStart",sr="showEnd",wt="hideStart",nr="hideEnd",Ye="filter",Ne="sort",qt="move",Vt="send",ot="beforeSend",Bt="receive",Wt="beforeReceive",or="dragInit",ar="dragStart",hr="dragMove",lr="dragScroll",_r="dragEnd",ur="dragReleaseStart",At="dragReleaseEnd",dr="destroy",ri="ontouchstart"in window,Se=!!window.PointerEvent,De=!!window.navigator.msPointerEnabled,fr=16777216;function z(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}z.prototype.on=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];return i||(i=this._events[t]=[]),i.push(e),this};z.prototype.off=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];if(!i||!i.length)return this;for(var r;(r=i.indexOf(e))!==-1;)i.splice(r,1);return this};z.prototype.clear=function(t){if(!this._events||!t)return this;var e=this._events[t];return e&&(e.length=0,delete this._events[t]),this};z.prototype.emit=function(t){if(!this._events||!t)return this._clearOnEmit=!1,this;var e=this._events[t];if(!e||!e.length)return this._clearOnEmit=!1,this;var i=this._queue,r=i.length,s=arguments.length-1,o;s>3&&(o=[],o.push.apply(o,arguments),o.shift()),i.push.apply(i,e),this._clearOnEmit&&(e.length=0,this._clearOnEmit=!1),++this._counter;for(var n=r,a=i.length;n<a;n++)if(s===0?i[n]():s===1?i[n](arguments[1]):s===2?i[n](arguments[1],arguments[2]):s===3?i[n](arguments[1],arguments[2],arguments[3]):i[n].apply(null,o),!this._events)return this;return--this._counter,this._counter||(i.length=0),this};z.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this};z.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0};z.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var $t=Se?"pointerout":De?"MSPointerOut":"",cr=100;function ht(t){$t&&(this._dragger=t,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}ht.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener($t,this._onOut))};ht.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener($t,this._onOut),this._resetData(),this._isActive=!1)};ht.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null};ht.prototype._onStart=function(t){t.pointerType!=="mouse"&&this._addBehaviour()};ht.prototype._onOut=function(t){this._dragger._getTrackedTouch(t)&&(this._resetData(),this._outEvent=t,this._timeout=window.setTimeout(this._onTimeout,cr))};ht.prototype._onTimeout=function(){var t=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(t)};ht.prototype.destroy=function(){$t&&(this._dragger.off("start",this._onStart),this._removeBehaviour())};var ae=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],Xe={};function Kt(t,e){var i=Xe[e]||"";if(i)return i;for(var r=e[0].toUpperCase()+e.slice(1),s=0;s<ae.length;){if(i=ae[s]?ae[s]+r:e,i in t)return Xe[e]=i,i;++s}return""}function si(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return t}var Jt=window.navigator.userAgent.toLowerCase(),vr=Jt.indexOf("edge")>-1,pr=Jt.indexOf("trident")>-1,gr=Jt.indexOf("firefox")>-1,mr=Jt.indexOf("android")>-1,rt=si()?{passive:!0}:!1,ni="touchAction",Yt=Kt(document.documentElement.style,ni),yr="auto";function f(t,e){this._element=t,this._emitter=new z,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(vr||pr)&&(Se||De)&&(this._edgeHack=new ht(this)),this.setCssProps(e),this._touchAction||this.setTouchAction(yr),t.addEventListener("dragstart",f._preventDefault,!1),t.addEventListener(f._inputEvents.start,this._onStart,rt)}f._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"};f._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"};f._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"};f._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"};f._inputEvents=function(){return ri?f._touchEvents:Se?f._pointerEvents:De?f._msPointerEvents:f._mouseEvents}();f._emitter=new z;f._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"};f._activeInstances=[];f._preventDefault=function(t){t.preventDefault&&t.cancelable!==!1&&t.preventDefault()};f._activateInstance=function(t){var e=f._activeInstances.indexOf(t);e>-1||(f._activeInstances.push(t),f._emitter.on(f._emitterEvents.move,t._onMove),f._emitter.on(f._emitterEvents.cancel,t._onCancel),f._emitter.on(f._emitterEvents.end,t._onEnd),f._activeInstances.length===1&&f._bindListeners())};f._deactivateInstance=function(t){var e=f._activeInstances.indexOf(t);e!==-1&&(f._activeInstances.splice(e,1),f._emitter.off(f._emitterEvents.move,t._onMove),f._emitter.off(f._emitterEvents.cancel,t._onCancel),f._emitter.off(f._emitterEvents.end,t._onEnd),f._activeInstances.length||f._unbindListeners())};f._bindListeners=function(){window.addEventListener(f._inputEvents.move,f._onMove,rt),window.addEventListener(f._inputEvents.end,f._onEnd,rt),f._inputEvents.cancel&&window.addEventListener(f._inputEvents.cancel,f._onCancel,rt)};f._unbindListeners=function(){window.removeEventListener(f._inputEvents.move,f._onMove,rt),window.removeEventListener(f._inputEvents.end,f._onEnd,rt),f._inputEvents.cancel&&window.removeEventListener(f._inputEvents.cancel,f._onCancel,rt)};f._getEventPointerId=function(t){return typeof t.pointerId=="number"?t.pointerId:t.changedTouches?t.changedTouches[0]?t.changedTouches[0].identifier:null:1};f._getTouchById=function(t,e){if(typeof t.pointerId=="number")return t.pointerId===e?t:null;if(t.changedTouches){for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t};f._onMove=function(t){f._emitter.emit(f._emitterEvents.move,t)};f._onCancel=function(t){f._emitter.emit(f._emitterEvents.cancel,t)};f._onEnd=function(t){f._emitter.emit(f._emitterEvents.end,t)};f.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,f._deactivateInstance(this)};f.prototype._createEvent=function(t,e){var i=this._getTrackedTouch(e);return{type:t,srcEvent:e,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===f._emitterEvents.start?0:this.getDeltaTime(),isFirst:t===f._emitterEvents.start,isFinal:t===f._emitterEvents.end||t===f._emitterEvents.cancel,pointerType:e.pointerType||(e.touches?"touch":"mouse"),identifier:this._pointerId,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:i.target}};f.prototype._emit=function(t,e){this._emitter.emit(t,this._createEvent(t,e))};f.prototype._getTrackedTouch=function(t){return this._pointerId===null?null:f._getTouchById(t,this._pointerId)};f.prototype._onStart=function(t){if(!this._isDestroyed&&this._pointerId===null&&(this._pointerId=f._getEventPointerId(t),this._pointerId!==null)){var e=this._getTrackedTouch(t);this._startX=this._currentX=e.clientX,this._startY=this._currentY=e.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(f._emitterEvents.start,t),this._isActive&&f._activateInstance(this)}};f.prototype._onMove=function(t){var e=this._getTrackedTouch(t);e&&(this._currentX=e.clientX,this._currentY=e.clientY,this._emit(f._emitterEvents.move,t))};f.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(f._emitterEvents.cancel,t),this._reset())};f.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(f._emitterEvents.end,t),this._reset())};f.prototype.isActive=function(){return this._isActive};f.prototype.setTouchAction=function(t){this._touchAction=t,Yt&&(this._cssProps[Yt]="",this._element.style[Yt]=t),ri&&(this._element.removeEventListener(f._touchEvents.start,f._preventDefault,!0),(this._element.style[Yt]!==t||gr&&mr)&&this._element.addEventListener(f._touchEvents.start,f._preventDefault,!0))};f.prototype.setCssProps=function(t){if(t){var e=this._cssProps,i=this._element,r,s;for(r in e)i.style[r]=e[r],delete e[r];for(r in t)if(t[r]){if(r===ni){this.setTouchAction(t[r]);continue}s=Kt(i.style,r),s&&(e[s]="",i.style[s]=t[r])}}};f.prototype.getDeltaX=function(){return this._currentX-this._startX};f.prototype.getDeltaY=function(){return this._currentY-this._startY};f.prototype.getDistance=function(){var t=this.getDeltaX(),e=this.getDeltaY();return Math.sqrt(t*t+e*e)};f.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0};f.prototype.on=function(t,e){this._emitter.on(t,e)};f.prototype.off=function(t,e){this._emitter.off(t,e)};f.prototype.destroy=function(){if(!this._isDestroyed){var t=this._element;this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(f._inputEvents.start,this._onStart,rt),t.removeEventListener("dragstart",f._preventDefault,!1),t.removeEventListener(f._touchEvents.start,f._preventDefault,!0);for(var e in this._cssProps)t.style[e]=this._cssProps[e],delete this._cssProps[e];this._element=null,this._isDestroyed=!0}};var Sr=1e3/60,Dr=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return this.setTimeout(function(){t(Date.now())},Sr)}).bind(window);function te(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var e=0;e<t;e++)this._lanes.push(new Ee)}te.prototype._step=function(t){var e=this._lanes,i=this._stepQueue,r=this._stepCallbacks,s,o,n,a,h,l;for(this._nextStep=null,s=0;s<e.length;s++){for(a=e[s].queue,h=e[s].callbacks,l=e[s].indices,o=0;o<a.length;o++)n=a[o],n&&(i.push(n),r[n]=h[n],delete h[n],delete l[n]);a.length=0}for(s=0;s<i.length;s++)n=i[s],r[n]&&r[n](t),delete r[n];i.length=0};te.prototype.add=function(t,e,i){this._lanes[t].add(e,i),this._nextStep||(this._nextStep=Dr(this._step))};te.prototype.remove=function(t,e){this._lanes[t].remove(e)};function Ee(){this.queue=[],this.indices={},this.callbacks={}}Ee.prototype.add=function(t,e){var i=this.indices[t];i!==void 0&&(this.queue[i]=void 0),this.queue.push(t),this.callbacks[t]=e,this.indices[t]=this.queue.length-1};Ee.prototype.remove=function(t){var e=this.indices[t];e!==void 0&&(this.queue[e]=void 0,delete this.callbacks[t],delete this.indices[t])};var oi="layoutRead",ai="layoutWrite",hi="visibilityRead",li="visibilityWrite",_i="dragStartRead",ui="dragStartWrite",di="dragMoveRead",fi="dragMoveWrite",ci="dragScrollRead",vi="dragScrollWrite",pi="dragSortRead",gi="placeholderLayoutRead",mi="placeholderLayoutWrite",yi="placeholderResizeWrite",Si="autoScrollRead",Di="autoScrollWrite",Ei="debounceRead",X=0,Ti=1,H=2,x=new te(3);function Er(t,e,i){x.add(X,oi+t,e),x.add(H,ai+t,i)}function wi(t){x.remove(X,oi+t),x.remove(H,ai+t)}function Tr(t,e,i){x.add(X,hi+t,e),x.add(H,li+t,i)}function Ai(t){x.remove(X,hi+t),x.remove(H,li+t)}function wr(t,e,i){x.add(X,_i+t,e),x.add(H,ui+t,i)}function xi(t){x.remove(X,_i+t),x.remove(H,ui+t)}function Ar(t,e,i){x.add(X,di+t,e),x.add(H,fi+t,i)}function Ri(t){x.remove(X,di+t),x.remove(H,fi+t)}function xr(t,e,i){x.add(X,ci+t,e),x.add(H,vi+t,i)}function bi(t){x.remove(X,ci+t),x.remove(H,vi+t)}function ee(t,e){x.add(Ti,pi+t,e)}function Rr(t){x.remove(Ti,pi+t)}function br(t,e,i){x.add(X,gi+t,e),x.add(H,mi+t,i)}function Ii(t){x.remove(X,gi+t),x.remove(H,mi+t)}function Ir(t,e){x.add(H,yi+t,e)}function Lr(t){x.remove(H,yi+t)}function Li(t,e){x.add(X,Si,t),x.add(H,Di,e)}function kr(){x.remove(X,Si),x.remove(H,Di)}function Cr(t,e){x.add(X,Ei+t,e)}function Pr(t){x.remove(X,Ei+t)}var k=1,O=2,Dt=4,Te=8,xt=k|Te,Rt=k|Dt,bt=O|Te,Ft=O|Dt,Mr="function";function A(t){return typeof t===Mr}var Nt=typeof WeakMap=="function"?new WeakMap:null;function q(t,e){var i=Nt&&Nt.get(t);return i||(i=window.getComputedStyle(t,null),Nt&&Nt.set(t,i)),i.getPropertyValue(e)}function F(t,e){return parseFloat(q(t,e))||0}var ct=document.documentElement,Or=document.body,Xt={value:0,offset:0};function ki(t){return t===window||t===ct||t===Or?window:t}function It(t){return t===window?t.pageXOffset:t.scrollLeft}function Lt(t){return t===window?t.pageYOffset:t.scrollTop}function Ci(t){return t===window?ct.scrollWidth-ct.clientWidth:t.scrollWidth-t.clientWidth}function Pi(t){return t===window?ct.scrollHeight-ct.clientHeight:t.scrollHeight-t.clientHeight}function Mi(t,e){if(e=e||{},t===window)e.width=ct.clientWidth,e.height=ct.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var i=t.getBoundingClientRect(),r=t.clientLeft||F(t,"border-left-width"),s=t.clientTop||F(t,"border-top-width");e.width=t.clientWidth,e.height=t.clientHeight,e.left=i.left+r,e.right=e.left+e.width,e.top=i.top+s,e.bottom=e.top+e.height}return e}function Ct(t){return t._drag._getGrid()._settings.dragAutoScroll}function Yr(t){t._drag&&t._drag._prepareScroll()}function Nr(t){if(!(!t._drag||!t._isActive)){var e=t._drag;e._scrollDiffX=e._scrollDiffY=0,t._setTranslate(e._left,e._top)}}function de(t,e,i,r){return Xt.value=Math.min(r/2,t),Xt.offset=Math.max(0,i+Xt.value*2+r*e-r)/2,Xt}function J(){this.reset()}J.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null};J.prototype.hasReachedEnd=function(){return Dt&this.direction?this.value>=this.maxValue:this.value<=0};J.prototype.computeCurrentScrollValue=function(){return this.value===null?k&this.direction?It(this.element):Lt(this.element):Math.max(0,Math.min(this.value,this.maxValue))};J.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),i=Dt&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(i,this.maxValue))};J.prototype.computeSpeed=function(){var t={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1};return function(e){var i=this.item,r=Ct(i).speed;return A(r)?(t.direction=this.direction,t.threshold=this.threshold,t.distance=this.distance,t.value=this.value,t.maxValue=this.maxValue,t.duration=this.duration,t.speed=this.speed,t.deltaTime=e,t.isEnding=this.isEnding,r(i,this.element,t)):r}}();J.prototype.tick=function(t){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(t),this.value=this.computeNextScrollValue(t),this.duration+=t,this.value};J.prototype.onStart=function(){var t=this.item,e=Ct(t).onStart;A(e)&&e(t,this.element,this.direction)};J.prototype.onStop=function(){var t=this.item,e=Ct(t).onStop;A(e)&&e(t,this.element,this.direction),t._drag&&t._drag.sort()};function Et(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}Et.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0};Et.prototype.addRequest=function(t){k&t.direction?(this.removeRequest(this.requestX),this.requestX=t):(this.removeRequest(this.requestY),this.requestY=t),t.action=this};Et.prototype.removeRequest=function(t){t&&(this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null))};Et.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:It(this.element),this.scrollTop=this.requestY?this.requestY.value:Lt(this.element)};Et.prototype.scroll=function(){var t=this.element;t&&(t.scrollTo?t.scrollTo(this.scrollLeft,this.scrollTop):(t.scrollLeft=this.scrollLeft,t.scrollTop=this.scrollTop))};function kt(t,e){this.pool=[],this.createItem=t,this.releaseItem=e}kt.prototype.pick=function(){return this.pool.pop()||this.createItem()};kt.prototype.release=function(t){this.releaseItem(t),this.pool.indexOf(t)===-1&&this.pool.push(t)};kt.prototype.reset=function(){this.pool.length=0};function Xr(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function Hr(t,e){if(!Xr(t,e))return 0;var i=Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left),r=Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top);return i*r}function zt(t,e){var i=Hr(t,e);if(!i)return 0;var r=Math.min(t.width,e.width)*Math.min(t.height,e.height);return i/r*100}var Oi={width:0,height:0,left:0,right:0,top:0,bottom:0},Yi={width:0,height:0,left:0,right:0,top:0,bottom:0};function R(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[k]={},this._requests[O]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new kt(function(){return new J},function(t){t.reset()}),this._actionPool=new kt(function(){return new Et},function(t){t.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}R.AXIS_X=k;R.AXIS_Y=O;R.FORWARD=Dt;R.BACKWARD=Te;R.LEFT=xt;R.RIGHT=Rt;R.UP=bt;R.DOWN=Ft;R.smoothSpeed=function(t,e,i){return function(r,s,o){var n=0;if(!o.isEnding)if(o.threshold>0){var a=o.threshold-Math.max(0,o.distance);n=t/o.threshold*a}else n=t;var h=o.speed,l=n;return h===n?l:h<n?(l=h+e*(o.deltaTime/1e3),Math.min(n,l)):(l=h-i*(o.deltaTime/1e3),Math.max(n,l))}};R.pointerHandle=function(t){var e={left:0,top:0,width:0,height:0},i=t||1;return function(r,s,o,n,a,h,l){return e.left=h-i*.5,e.top=l-i*.5,e.width=i,e.height=i,e}};R.prototype._readTick=function(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))};R.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),Li(this._readTick,this._writeTick))};R.prototype._startTicking=function(){this._isTicking=!0,Li(this._readTick,this._writeTick)};R.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,kr()};R.prototype._getItemHandleRect=function(t,e,i){var r=t._drag;if(e){var s=r._dragMoveEvent||r._dragStartEvent,o=e(t,r._clientX,r._clientY,t._width,t._height,s.clientX,s.clientY);i.left=o.left,i.top=o.top,i.width=o.width,i.height=o.height}else i.left=r._clientX,i.top=r._clientY,i.width=t._width,i.height=t._height;return i.right=i.left+i.width,i.bottom=i.top+i.height,i};R.prototype._requestItemScroll=function(t,e,i,r,s,o,n){var a=this._requests[e],h=a[t._id];h?(h.element!==i||h.direction!==r)&&h.reset():h=this._requestPool.pick(),h.item=t,h.element=i,h.direction=r,h.threshold=s,h.distance=o,h.maxValue=n,a[t._id]=h};R.prototype._cancelItemScroll=function(t,e){var i=this._requests[e],r=i[t._id];r&&(r.action&&r.action.removeRequest(r),this._requestPool.release(r),delete i[t._id])};R.prototype._checkItemOverlap=function(t,e,i){var r=Ct(t),s=A(r.targets)?r.targets(t):r.targets,o=r.threshold,n=r.safeZone;if(!s||!s.length){e&&this._cancelItemScroll(t,k),i&&this._cancelItemScroll(t,O);return}var a=this._dragDirections[t._id],h=a[0],l=a[1];if(!h&&!l){e&&this._cancelItemScroll(t,k),i&&this._cancelItemScroll(t,O);return}for(var _=this._getItemHandleRect(t,r.handle,Oi),v=Yi,S=null,y=null,D=!0,u=!0,d=0,g=0,c=null,m=null,p=0,w=0,b=0,P=null,M=-1/0,I=0,$=0,C=null,V=0,it=0,Y=null,Mt=-1/0,xe=0,Re=0,be=null,Ie=0,Le=0,se=0;se<s.length;se++)S=s[se],D=e&&h&&S.axis!==O,u=i&&l&&S.axis!==k,g=S.priority||0,!((!D||g<M)&&(!u||g<Mt))&&(y=ki(S.element||S),w=D?Ci(y):-1,b=u?Pi(y):-1,!(!w&&!b)&&(v=Mi(y,v),d=zt(_,v),!(d<=0)&&(D&&g>=M&&w>0&&(g>M||d>$)&&(m=null,c=de(typeof S.threshold=="number"?S.threshold:o,n,_.width,v.width),h===Rt?(p=v.right+c.offset-_.right,p<=c.value&&It(y)<w&&(m=Rt)):h===xt&&(p=_.left-(v.left-c.offset),p<=c.value&&It(y)>0&&(m=xt)),m!==null&&(P=y,M=g,I=c.value,$=d,C=m,V=p,it=w)),u&&g>=Mt&&b>0&&(g>Mt||d>Re)&&(m=null,c=de(typeof S.threshold=="number"?S.threshold:o,n,_.height,v.height),l===Ft?(p=v.bottom+c.offset-_.bottom,p<=c.value&&Lt(y)<b&&(m=Ft)):l===bt&&(p=_.top-(v.top-c.offset),p<=c.value&&Lt(y)>0&&(m=bt)),m!==null&&(Y=y,Mt=g,xe=c.value,Re=d,be=m,Ie=p,Le=b)))));e&&(P?this._requestItemScroll(t,k,P,C,I,V,it):this._cancelItemScroll(t,k)),i&&(Y?this._requestItemScroll(t,O,Y,be,xe,Ie,Le):this._cancelItemScroll(t,O))};R.prototype._updateScrollRequest=function(t){for(var e=t.item,i=Ct(e),r=A(i.targets)?i.targets(e):i.targets,s=r&&r.length||0,o=i.threshold,n=i.safeZone,a=this._getItemHandleRect(e,i.handle,Oi),h=Yi,l=null,_=null,v=!1,S=null,y=null,D=null,u=null,d=null,g=null,c=0;c<s;c++)if(l=r[c],_=ki(l.element||l),_===t.element){if(v=!!(k&t.direction),v){if(l.axis===O)continue}else if(l.axis===k)continue;if(d=v?Ci(_):Pi(_),d<=0||(h=Mi(_,h),S=zt(a,h),S<=0)||(y=de(typeof l.threshold=="number"?l.threshold:o,n,v?a.width:a.height,v?h.width:h.height),t.direction===xt?D=a.left-(h.left-y.offset):t.direction===Rt?D=h.right+y.offset-a.right:t.direction===bt?D=a.top-(h.top-y.offset):D=h.bottom+y.offset-a.bottom,D>y.value)||(u=v?It(_):Lt(_),g=Dt&t.direction?u>=d:u<=0,g))break;return t.maxValue=d,t.threshold=y.value,t.distance=D,t.isEnding=!1,!0}return i.smoothStop===!0&&t.speed>0?(g===null&&(g=t.hasReachedEnd()),t.isEnding=!g):t.isEnding=!1,t.isEnding};R.prototype._updateRequests=function(){for(var t=this._items,e=this._requests[k],i=this._requests[O],r,s,o,n,a,h,l,_=0;_<t.length;_++)r=t[_],n=this._requestOverlapCheck[r._id],a=n>0&&this._tickTime-n>this._overlapCheckInterval,h=!0,s=e[r._id],s&&s.isActive&&(h=!this._updateScrollRequest(s),h&&(a=!0,this._cancelItemScroll(r,k))),l=!0,o=i[r._id],o&&o.isActive&&(l=!this._updateScrollRequest(o),l&&(a=!0,this._cancelItemScroll(r,O))),a&&(this._requestOverlapCheck[r._id]=0,this._checkItemOverlap(r,h,l))};R.prototype._requestAction=function(t,e){for(var i=this._actions,r=e===k,s=null,o=0;o<i.length;o++){if(s=i[o],t.element!==s.element){s=null;continue}if(r?s.requestX:s.requestY){this._cancelItemScroll(t.item,e);return}break}s||(s=this._actionPool.pick()),s.element=t.element,s.addRequest(t),t.tick(this._tickDeltaTime),i.push(s)};R.prototype._updateActions=function(){var t=this._items,e=this._requests,i=this._actions,r,s,o,n;for(n=0;n<t.length;n++)r=t[n]._id,s=e[k][r],o=e[O][r],s&&this._requestAction(s,k),o&&this._requestAction(o,O);for(n=0;n<i.length;n++)i[n].computeScrollValues()};R.prototype._applyActions=function(){var t=this._actions,e=this._items,i;if(t.length){for(i=0;i<t.length;i++)t[i].scroll(),this._actionPool.release(t[i]);for(t.length=0,i=0;i<e.length;i++)Yr(e[i]);for(i=0;i<e.length;i++)Nr(e[i])}};R.prototype._updateDragDirection=function(t){var e=this._dragPositions[t._id],i=this._dragDirections[t._id],r=t._drag._left,s=t._drag._top;if(e.length){var o=e[0],n=e[1];i[0]=r>o?Rt:r<o?xt:i[0]||0,i[1]=s>n?Ft:s<n?bt:i[1]||0}e[0]=r,e[1]=s};R.prototype.addItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);e===-1&&(this._items.push(t),this._requestOverlapCheck[t._id]=this._tickTime,this._dragDirections[t._id]=[0,0],this._dragPositions[t._id]=[],this._isTicking||this._startTicking())}};R.prototype.updateItem=function(t){this._isDestroyed||this._dragDirections[t._id]&&(this._updateDragDirection(t),this._requestOverlapCheck[t._id]||(this._requestOverlapCheck[t._id]=this._tickTime))};R.prototype.removeItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);if(e!==-1){var i=t._id,r=this._requests[k][i];r&&(this._cancelItemScroll(t,k),delete this._requests[k][i]);var s=this._requests[O][i];s&&(this._cancelItemScroll(t,O),delete this._requests[O][i]),delete this._requestOverlapCheck[i],delete this._dragPositions[i],delete this._dragDirections[i],this._items.splice(e,1),this._isTicking&&!this._items.length&&this._stopTicking()}}};R.prototype.isItemScrollingX=function(t){var e=this._requests[k][t._id];return!!(e&&e.isActive)};R.prototype.isItemScrollingY=function(t){var e=this._requests[O][t._id];return!!(e&&e.isActive)};R.prototype.isItemScrolling=function(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)};R.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var vt=window.Element.prototype,Gr=vt.matches||vt.matchesSelector||vt.webkitMatchesSelector||vt.mozMatchesSelector||vt.msMatchesSelector||vt.oMatchesSelector||function(){return!1};function ie(t,e){return Gr.call(t,e)}function B(t,e){e&&(t.classList?t.classList.add(e):ie(t,"."+e)||(t.className+=" "+e))}var He=[],qr="number";function we(t,e,i){var r=typeof i===qr?i:-1;r<0&&(r=t.length-r+1),t.splice.apply(t,He.concat(r,0,e)),He.length=0}function mt(t,e,i){var r=Math.max(0,t.length-1+(i||0));return e>r?r:e<0?Math.max(r+e+1,0):e}function Ni(t,e,i){if(!(t.length<2)){var r=mt(t,e),s=mt(t,i);r!==s&&t.splice(s,0,t.splice(r,1)[0])}}function Xi(t,e,i){if(!(t.length<2)){var r=mt(t,e),s=mt(t,i),o;r!==s&&(o=t[r],t[r]=t[s],t[s]=o)}}var Z=Kt(document.documentElement.style,"transform")||"transform",Vr=/([A-Z])/g,Br=/^(webkit-|moz-|ms-|o-)/,Wr=/^(-m-s-)/;function fe(t){var e=t.replace(Vr,"-$1").toLowerCase();return e=e.replace(Br,"-$1"),e=e.replace(Wr,"-ms-"),e}var Hi=fe(Z),Fr="none",zr="inline",Ur="none",jr="display";function Zr(t){var e=q(t,Hi);if(!e||e===Fr)return!1;var i=q(t,jr);return!(i===zr||i===Ur)}function ce(t){for(var e=document,i=t||e;i&&i!==e&&q(i,"position")==="static"&&!Zr(i);)i=i.parentElement||e;return i}var he={},le={},_t={};function Ge(t,e){var i=e||{},r;return i.left=0,i.top=0,t===document||(i.left=window.pageXOffset||0,i.top=window.pageYOffset||0,t.self===window.self)||(r=t.getBoundingClientRect(),i.left+=r.left,i.top+=r.top,i.left+=F(t,"border-left-width"),i.top+=F(t,"border-top-width")),i}function yt(t,e,i){return _t.left=0,_t.top=0,t===e||i&&(t=ce(t),e=ce(e),t===e)||(Ge(t,he),Ge(e,le),_t.left=le.left-he.left,_t.top=le.top-he.top),_t}function _e(t){return t==="auto"||t==="scroll"||t==="overlay"}function Qr(t){return _e(q(t,"overflow"))||_e(q(t,"overflow-x"))||_e(q(t,"overflow-y"))}function qe(t,e){for(e=e||[];t&&t!==document;){if(t.getRootNode&&t instanceof DocumentFragment){t=t.getRootNode().host;continue}Qr(t)&&e.push(t),t=t.parentNode}return e.push(window),e}var pt={},$r="none",Kr=/^matrix3d/,Jr=/([^,]*,){4}/,ts=/([^,]*,){12}/,es=/[^,]*,/;function K(t){pt.x=0,pt.y=0;var e=q(t,Hi);if(!e||e===$r)return pt;var i=Kr.test(e),r=e.replace(i?ts:Jr,""),s=r.replace(es,"");return pt.x=parseFloat(r)||0,pt.y=parseFloat(s)||0,pt}function N(t,e){e&&(t.classList?t.classList.remove(e):ie(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim()))}var is=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,Ut=0,ve=1,jt=2,Gi=si()?{passive:!0}:!1;function E(t){var e=t._element,i=t.getGrid(),r=i._settings;this._item=t,this._gridId=i._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=A(r.dragStartPredicate)?r.dragStartPredicate:E.defaultStartPredicate,this._startPredicateState=Ut,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=r.dragHandle&&e.querySelector(r.dragHandle)||e,this._dragger=new f(this._handle,r.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}E.autoScroller=new R;E.defaultStartPredicate=function(t,e,i){var r=t._drag;if(e.isFirst&&e.srcEvent.button||!is&&e.isFirst&&e.srcEvent.isTrusted===!0&&e.srcEvent.defaultPrevented===!1&&e.srcEvent.cancelable===!1)return!1;if(e.isFinal){r._finishStartPredicate(e);return}var s=r._startPredicateData;if(!s){var o=i||r._getGrid()._settings.dragStartPredicate||{};r._startPredicateData=s={distance:Math.max(o.distance,0)||0,delay:Math.max(o.delay,0)||0}}return s.delay&&(s.event=e,s.delayTimer||(s.delayTimer=window.setTimeout(function(){s.delay=0,r._resolveStartPredicate(s.event)&&(r._forceResolveStartPredicate(s.event),r._resetStartPredicate())},s.delay))),r._resolveStartPredicate(e)};E.defaultSortPredicate=function(){var t={},e={},i={},r=[],s=1,o=100;function n(a,h,l){var _=null,v=h._settings.dragSort,S=-1,y,D,u,d,g,c,m,p,w,b;if(v===!0?(r[0]=h,D=r):A(v)&&(D=v.call(h,a)),!D||!Array.isArray(D)||!D.length)return _;for(b=0;b<D.length;b++)if(u=D[b],!u._isDestroyed){for(u._updateBoundingRect(),c=Math.max(0,u._left),m=Math.max(0,u._top),p=Math.min(window.innerWidth,u._right),w=Math.min(window.innerHeight,u._bottom),d=u._element.parentNode;d&&d!==document&&d!==document.documentElement&&d!==document.body;){if(d.getRootNode&&d instanceof DocumentFragment){d=d.getRootNode().host;continue}if(q(d,"overflow")!=="visible"&&(g=d.getBoundingClientRect(),c=Math.max(c,g.left),m=Math.max(m,g.top),p=Math.min(p,g.right),w=Math.min(w,g.bottom)),q(d,"position")==="fixed")break;d=d.parentNode}c>=p||m>=w||(e.left=c,e.top=m,e.width=p-c,e.height=w-m,y=zt(t,e),y>l&&y>S&&(S=y,_=u))}return r.length=0,_}return function(a,h){var l=a._drag,_=l._getGrid(),v=h&&typeof h.threshold=="number"?h.threshold:50,S=h&&h.action===j?j:ft,y=h&&h.migrateAction===j?j:ft;v=Math.min(Math.max(v,s),o),t.width=a._width,t.height=a._height,t.left=l._clientX,t.top=l._clientY;var D=n(a,_,v);if(!D)return null;var u=a.getGrid()!==D,d=0,g=0,c=0,m=-1,p=!1,w,b,P;for(D===_?(t.left=l._gridX+a._marginLeft,t.top=l._gridY+a._marginTop):(D._updateBorders(1,0,1,0),d=D._left+D._borderLeft,g=D._top+D._borderTop),P=0;P<D._items.length;P++)w=D._items[P],!(!w._isActive||w===a)&&(p=!0,e.width=w._width,e.height=w._height,e.left=w._left+w._marginLeft+d,e.top=w._top+w._marginTop+g,b=zt(t,e),b>c&&(m=P,c=b));return u&&c<v&&(m=p?m:0,c=v),c>=v?(i.grid=D,i.index=m,i.action=u?y:S,i):null}}();E.prototype.stop=function(){if(this._isActive){if(this._isMigrating){this._finishMigration();return}var t=this._item,e=t._id;if(E.autoScroller.removeItem(t),xi(e),Ri(e),bi(e),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var i=t._element,r=this._getGrid(),s=r._settings.itemDraggingClass;i.parentNode!==r._element&&(r._element.appendChild(i),t._setTranslate(this._gridX,this._gridY),s&&i.clientWidth),N(i,s)}this._reset()}};E.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(t===!0?this._handleSort():ee(e._id,this._handleSort))};E.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),E.autoScroller.removeItem(this._item),this._isDestroyed=!0)};E.prototype._getGrid=function(){return Qt[this._gridId]||null};E.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0};E.prototype._bindScrollListeners=function(){var t=this._getGrid()._element,e=this._container,i=this._scrollers,r,s;if(i.length=0,qe(this._item._element.parentNode,i),e!==t)for(r=[],qe(t,r),s=0;s<r.length;s++)i.indexOf(r[s])<0&&i.push(r[s]);for(s=0;s<i.length;s++)i[s].addEventListener("scroll",this._onScroll,Gi)};E.prototype._unbindScrollListeners=function(){var t=this._scrollers,e;for(e=0;e<t.length;e++)t[e].removeEventListener("scroll",this._onScroll,Gi);t.length=0};E.prototype._resolveStartPredicate=function(t){var e=this._startPredicateData;if(!(t.distance<e.distance||e.delay))return this._resetStartPredicate(),!0};E.prototype._forceResolveStartPredicate=function(t){!this._isDestroyed&&this._startPredicateState===ve&&(this._startPredicateState=jt,this._onStart(t))};E.prototype._finishStartPredicate=function(t){var e=this._item._element,i=Math.abs(t.deltaX)<2&&Math.abs(t.deltaY)<2&&t.deltaTime<200;this._resetStartPredicate(),i&&rs(e)};E.prototype._resetHeuristics=function(t,e){this._blockedSortIndex=null,this._sortX1=this._sortX2=t,this._sortY1=this._sortY2=e};E.prototype._checkHeuristics=function(t,e){var i=this._getGrid()._settings.dragSortHeuristics,r=i.minDragDistance;if(r<=0)return this._blockedSortIndex=null,!0;var s=t-this._sortX2,o=e-this._sortY2,n=r>3&&i.minBounceBackAngle>0;if(n||(this._blockedSortIndex=null),Math.abs(s)>r||Math.abs(o)>r){if(n){var a=Math.atan2(s,o),h=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),l=Math.atan2(Math.sin(a-h),Math.cos(a-h));Math.abs(l)>i.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=t,this._sortY2=e,!0}return!1};E.prototype._resetStartPredicate=function(){var t=this._startPredicateData;t&&(t.delayTimer&&(t.delayTimer=window.clearTimeout(t.delayTimer)),this._startPredicateData=null)};E.prototype._handleSort=function(){if(this._isActive){var t=this._getGrid()._settings;if(!t.dragSort||!t.dragAutoScroll.sortDuringScroll&&E.autoScroller.isItemScrolling(this._item)){this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer));return}var e=this._checkHeuristics(this._gridX,this._gridY);if(!(!this._isSortNeeded&&!e)){var i=t.dragSortHeuristics.sortInterval;i<=0||this._isSortNeeded?(this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):this._sortTimer===void 0&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,i))}}};E.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,ee(this._item._id,this._handleSort)};E.prototype._cancelSort=function(){this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),Rr(this._item._id)};E.prototype._finishSort=function(){var t=this._getGrid()._settings.dragSort,e=t&&(this._isSortNeeded||this._sortTimer!==void 0);this._cancelSort(),e&&this._checkOverlap()};E.prototype._checkOverlap=function(){if(this._isActive){var t=this._item,e=this._getGrid()._settings,i,r,s,o,n,a,h,l;A(e.dragSortPredicate)?i=e.dragSortPredicate(t,this._dragMoveEvent):i=E.defaultSortPredicate(t,e.dragSortPredicate),!(!i||typeof i.index!="number")&&(h=i.action===j?j:ft,r=t.getGrid(),o=i.grid||r,l=r!==o,s=r._items.indexOf(t),n=mt(o._items,i.index,l&&h===ft?1:0),!(!l&&n===this._blockedSortIndex)&&(l?(this._blockedSortIndex=null,a=o._items[n],r._hasListeners(ot)&&r._emit(ot,{item:t,fromGrid:r,fromIndex:s,toGrid:o,toIndex:n}),o._hasListeners(Wt)&&o._emit(Wt,{item:t,fromGrid:r,fromIndex:s,toGrid:o,toIndex:n}),t._gridId=o._id,this._isMigrating=t._gridId!==this._gridId,r._items.splice(s,1),we(o._items,t,n),t._sortData=null,r._hasListeners(Vt)&&r._emit(Vt,{item:t,fromGrid:r,fromIndex:s,toGrid:o,toIndex:n}),o._hasListeners(Bt)&&o._emit(Bt,{item:t,fromGrid:r,fromIndex:s,toGrid:o,toIndex:n}),h===j&&a&&a.isActive()&&o._items.indexOf(a)>-1&&o.send(a,r,s,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),r.layout(),o.layout()):s!==n&&(this._blockedSortIndex=s,(h===j?Xi:Ni)(r._items,s,n),r._hasListeners(qt)&&r._emit(qt,{item:t,fromIndex:s,toIndex:n,action:h}),r.layout())))}};E.prototype._finishMigration=function(){var t=this._item,e=t._dragRelease,i=t._element,r=t._isActive,s=t.getGrid(),o=s._element,n=s._settings,a=n.dragContainer||o,h=this._getGrid()._settings,l=i.parentNode,_=r?h.itemVisibleClass:h.itemHiddenClass,v=r?n.itemVisibleClass:n.itemHiddenClass,S,y;this._isMigrating=!1,this.destroy(),h.itemClass!==n.itemClass&&(N(i,h.itemClass),B(i,n.itemClass)),_!==v&&(N(i,_),B(i,v)),a!==l&&(a.appendChild(i),y=yt(l,a,!0),S=K(i),S.x-=y.left,S.y-=y.top),t._refreshDimensions(),y=yt(a,o,!0),e._containerDiffX=y.left,e._containerDiffY=y.top,t._drag=n.dragEnabled?new E(t):null,a!==l&&t._setTranslate(S.x,S.y),t._visibility.setStyles(r?n.visibleStyles:n.hiddenStyles),e.start()};E.prototype._preStartCheck=function(t){this._startPredicateState===Ut&&(this._startPredicateState=ve),this._startPredicateState===ve?(this._startPredicateResult=this._startPredicate(this._item,t),this._startPredicateResult===!0?(this._startPredicateState=jt,this._onStart(t)):this._startPredicateResult===!1&&(this._resetStartPredicate(t),this._dragger._reset(),this._startPredicateState=Ut)):this._startPredicateState===jt&&this._isActive&&this._onMove(t)};E.prototype._preEndCheck=function(t){var e=this._startPredicateState===jt;this._startPredicate(this._item,t),this._startPredicateState=Ut,!(!e||!this._isActive)&&(this._isStarted?this._onEnd(t):this.stop())};E.prototype._onStart=function(t){var e=this._item;e._isActive&&(this._isActive=!0,this._dragStartEvent=t,E.autoScroller.addItem(e),wr(e._id,this._prepareStart,this._applyStart))};E.prototype._prepareStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),r=i._settings,s=i._element,o=r.dragContainer||s,n=ce(o),a=K(e),h=e.getBoundingClientRect(),l=o!==s;if(this._container=o,this._containingBlock=n,this._clientX=h.left,this._clientY=h.top,this._left=this._gridX=a.x,this._top=this._gridY=a.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),l){var _=yt(n,s);this._containerDiffX=_.left,this._containerDiffY=_.top}}}};E.prototype._applyStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid(),i=t._element,r=t._dragRelease,s=t._migrate,o=this._container!==e._element;t.isPositioning()&&t._layout.stop(!0,this._left,this._top),s._isActive&&(this._left-=s._containerDiffX,this._top-=s._containerDiffY,this._gridX-=s._containerDiffX,this._gridY-=s._containerDiffY,s.stop(!0,this._left,this._top)),t.isReleasing()&&r._reset(),e._settings.dragPlaceholder.enabled&&t._dragPlaceholder.create(),this._isStarted=!0,e._emit(or,t,this._dragStartEvent),o&&(i.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(i),t._setTranslate(this._left,this._top))),B(i,e._settings.itemDraggingClass),this._bindScrollListeners(),e._emit(ar,t,this._dragStartEvent)}}};E.prototype._onMove=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._dragMoveEvent=t,Ar(e._id,this._prepareMove,this._applyMove),ee(e._id,this._handleSort)};E.prototype._prepareMove=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid()._settings,i=e.dragAxis,r=this._dragMoveEvent,s=this._dragPrevMoveEvent||this._dragStartEvent||r;if(i!=="y"){var o=r.clientX-s.clientX;this._left=this._left-this._moveDiffX+o,this._gridX=this._gridX-this._moveDiffX+o,this._clientX=this._clientX-this._moveDiffX+o,this._moveDiffX=o}if(i!=="x"){var n=r.clientY-s.clientY;this._top=this._top-this._moveDiffY+n,this._gridY=this._gridY-this._moveDiffY+n,this._clientY=this._clientY-this._moveDiffY+n,this._moveDiffY=n}this._dragPrevMoveEvent=r}}};E.prototype._applyMove=function(){if(this._isActive){var t=this._item;t._isActive&&(this._moveDiffX=this._moveDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(hr,t,this._dragMoveEvent),E.autoScroller.updateItem(t))}};E.prototype._onScroll=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._scrollEvent=t,xr(e._id,this._prepareScroll,this._applyScroll),ee(e._id,this._handleSort)};E.prototype._prepareScroll=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),r=i._element,s=e.getBoundingClientRect();if(this._container!==r){var o=yt(this._containingBlock,r);this._containerDiffX=o.left,this._containerDiffY=o.top}var n=this._clientX-this._moveDiffX-s.left;this._left=this._left-this._scrollDiffX+n,this._scrollDiffX=n;var a=this._clientY-this._moveDiffY-s.top;this._top=this._top-this._scrollDiffY+a,this._scrollDiffY=a,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}}};E.prototype._applyScroll=function(){if(this._isActive){var t=this._item;t._isActive&&(this._scrollDiffX=this._scrollDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(lr,t,this._scrollEvent))}};E.prototype._onEnd=function(t){var e=this._item,i=e._element,r=this._getGrid(),s=r._settings,o=e._dragRelease;if(!e._isActive){this.stop();return}xi(e._id),Ri(e._id),bi(e._id),this._finishSort(),this._unbindScrollListeners(),o._containerDiffX=this._containerDiffX,o._containerDiffY=this._containerDiffY,this._reset(),N(i,s.itemDraggingClass),E.autoScroller.removeItem(e),r._emit(_r,e,t),this._isMigrating?this._finishMigration():o.start()};function rs(t){if(t.tagName.toLowerCase()==="a"){var e=t.getAttribute("href");if(e){var i=t.getAttribute("target");i&&i!=="_self"?window.open(e,i):window.location.href=e}}}function qi(t,e){var i={},r,s;if(Array.isArray(e))for(s=0;s<e.length;s++)r=e[s],i[r]=q(t,fe(r));else for(r in e)i[r]=q(t,fe(r));return i}var ss=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,Ve={};function ns(t){var e=Ve[t];return e||(e=t.replace(ss,""),e!==t&&(e=e[0].toLowerCase()+e.slice(1)),Ve[t]=e,e)}var os="[native code]";function as(t){var e=window.Symbol;return!!(t&&A(e)&&A(e.toString)&&e(t).toString().indexOf(os)>-1)}function St(t,e){for(var i in e)t.style[i]=e[i]}var hs=!!(Element&&A(Element.prototype.animate)),Be=!!(Element&&as(Element.prototype.animate));function Q(t){this._element=t,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}Q.prototype.start=function(t,e,i){if(!this._isDestroyed){var r=this._element,s=i||{};if(!hs){St(r,e),this._callback=A(s.onFinish)?s.onFinish:null,this._onFinish();return}var o=this._animation,n=this._props,a=this._values,h=s.duration||300,l=s.easing||"ease",_=!1,v,S,y;if(o&&(S=0,(h!==this._duration||l!==this._easing)&&(_=!0),!_)){for(v in e)if(++S,y=n.indexOf(v),y===-1||e[v]!==a[y]){_=!0;break}S!==n.length&&(_=!0)}if(_&&o.cancel(),this._callback=A(s.onFinish)?s.onFinish:null,!(o&&!_)){n.length=a.length=0;for(v in e)n.push(v),a.push(e[v]);this._duration=h,this._easing=l,this._animation=r.animate([We(t,Be),We(e,Be)],{duration:h,easing:l}),this._animation.onfinish=this._onFinish,St(r,e)}}};Q.prototype.stop=function(){this._isDestroyed||!this._animation||(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)};Q.prototype.getCurrentStyles=function(){return qi(element,currentProps)};Q.prototype.isAnimating=function(){return!!this._animation};Q.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)};Q.prototype._onFinish=function(){var t=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,t&&t()};function We(t,e){var i={};for(var r in t)i[e?r:ns(r)]=t[r];return i}function st(t,e){return"translateX("+t+"px) translateY("+e+"px)"}function G(t){this._item=t,this._animation=new Q,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}G.prototype._updateDimensions=function(){this.isActive()&&St(this._element,{width:this._item._width+"px",height:this._item._height+"px"})};G.prototype._onLayoutStart=function(t,e){var i=this._item;if(t.indexOf(i)===-1){this.reset();return}var r=i._left,s=i._top,o=this._left,n=this._top;if(this._left=r,this._top=s,!(!e&&!this._didMigrate&&o===r&&n===s)){var a=r+i._marginLeft,h=s+i._marginTop,l=i.getGrid(),_=!e&&l._settings.layoutDuration>0;if(!_||this._didMigrate){Ii(i._id),this._element.style[Z]=st(a,h),this._animation.stop(),this._didMigrate&&(l.getElement().appendChild(this._element),this._didMigrate=!1);return}this._nextTransX=a,this._nextTransY=h,br(i._id,this._setupAnimation,this._startAnimation)}};G.prototype._setupAnimation=function(){if(this.isActive()){var t=K(this._element);this._transX=t.x,this._transY=t.y}};G.prototype._startAnimation=function(){if(this.isActive()){var t=this._animation,e=this._transX,i=this._transY,r=this._nextTransX,s=this._nextTransY;if(e===r&&i===s){t.isAnimating()&&(this._element.style[Z]=st(r,s),t.stop());return}var o=this._item.getGrid()._settings,n={},a={};n[Z]=st(e,i),a[Z]=st(r,s),t.start(n,a,{duration:o.layoutDuration,easing:o.layoutEasing,onFinish:this._onLayoutEnd})}};G.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()};G.prototype._onReleaseEnd=function(t){if(t._id===this._item._id){if(!this._animation.isAnimating()){this.reset();return}this._resetAfterLayout=!0}};G.prototype._onMigrate=function(t){if(t.item===this._item){var e=this._item.getGrid(),i=t.toGrid;e.off(At,this._onReleaseEnd),e.off(nt,this._onLayoutStart),e.off(ot,this._onMigrate),e.off(wt,this._onHide),i.on(At,this._onReleaseEnd),i.on(nt,this._onLayoutStart),i.on(ot,this._onMigrate),i.on(wt,this._onHide),this._didMigrate=!0}};G.prototype._onHide=function(t){t.indexOf(this._item)>-1&&this.reset()};G.prototype.create=function(){if(this.isActive()){this._resetAfterLayout=!1;return}var t=this._item,e=t.getGrid(),i=e._settings,r=this._animation;this._left=t._left,this._top=t._top;var s;A(i.dragPlaceholder.createElement)?s=i.dragPlaceholder.createElement(t):s=document.createElement("div"),this._element=s,r._element=s,this._className=i.itemPlaceholderClass||"",this._className&&B(s,this._className),St(s,{position:"absolute",left:"0px",top:"0px",width:t._width+"px",height:t._height+"px"}),s.style[Z]=st(t._left+t._marginLeft,t._top+t._marginTop),e.on(nt,this._onLayoutStart),e.on(At,this._onReleaseEnd),e.on(ot,this._onMigrate),e.on(wt,this._onHide),A(i.dragPlaceholder.onCreate)&&i.dragPlaceholder.onCreate(t,s),e.getElement().appendChild(s)};G.prototype.reset=function(){if(this.isActive()){var t=this._element,e=this._item,i=e.getGrid(),r=i._settings,s=this._animation;this._resetAfterLayout=!1,Ii(e._id),Lr(e._id),s.stop(),s._element=null,i.off(At,this._onReleaseEnd),i.off(nt,this._onLayoutStart),i.off(ot,this._onMigrate),i.off(wt,this._onHide),this._className&&(N(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,A(r.dragPlaceholder.onRemove)&&r.dragPlaceholder.onRemove(e,t)}};G.prototype.isActive=function(){return!!this._element};G.prototype.getElement=function(){return this._element};G.prototype.updateDimensions=function(){this.isActive()&&Ir(this._item._id,this._updateDimensions)};G.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null};function lt(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}lt.prototype.start=function(){if(!(this._isDestroyed||this._isActive)){var t=this._item,e=t.getGrid(),i=e._settings;this._isActive=!0,B(t._element,i.itemReleasingClass),i.dragRelease.useDragContainer||this._placeToGrid(),e._emit(ur,t),e._nextLayoutData||t._layout.start(!1)}};lt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var r=this._item,s=r.getGrid();!t&&(e===void 0||i===void 0)&&(e=r._left,i=r._top);var o=this._placeToGrid(e,i);this._reset(o),t||s._emit(At,r)}};lt.prototype.isJustReleased=function(){return this._isActive&&this._isPositioningStarted===!1};lt.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};lt.prototype._placeToGrid=function(t,e){if(!this._isDestroyed){var i=this._item,r=i._element,s=i.getGrid()._element,o=!1;if(r.parentNode!==s){if(t===void 0||e===void 0){var n=K(r);t=n.x-this._containerDiffX,e=n.y-this._containerDiffY}s.appendChild(r),i._setTranslate(t,e),o=!0}return this._containerDiffX=0,this._containerDiffY=0,o}};lt.prototype._reset=function(t){if(!this._isDestroyed){var e=this._item,i=e.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,i&&(t&&e._element.clientWidth,N(e._element,i))}};var Fe=2;function tt(t){var e=t._element,i=e.style;this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},i.left="0px",i.top="0px",t._setTranslate(0,0),this._animation=new Q(e),this._queue="layout-"+t._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}tt.prototype.start=function(t,e){if(!this._isDestroyed){var i=this._item,r=i._dragRelease,s=i.getGrid()._settings,o=this._isActive,n=r.isJustReleased(),a=n?s.dragRelease.duration:s.layoutDuration,h=n?s.dragRelease.easing:s.layoutEasing,l=!t&&!this._skipNextAnimation&&a>0;if(o&&(wi(i._id),i._emitter.burst(this._queue,!0,i)),n&&(r._isPositioningStarted=!0),A(e)&&i._emitter.on(this._queue,e),this._skipNextAnimation=!1,!l){this._updateOffsets(),i._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=h,this._animOptions.duration=a,this._isInterrupted=o,Er(i._id,this._setupAnimation,this._startAnimation)}};tt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var r=this._item;if(wi(r._id),this._animation.isAnimating()){if(e===void 0||i===void 0){var s=K(r._element);e=s.x,i=s.y}r._setTranslate(e,i),this._animation.stop()}N(r._element,r.getGrid()._settings.itemPositioningClass),this._isActive=!1,t&&r._emitter.burst(this._queue,!0,r)}};tt.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),t[Z]="",t.left="",t.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}};tt.prototype._updateOffsets=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;this._offsetLeft=i._isActive?i._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=i._isActive?i._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}};tt.prototype._finish=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;t._tX=this._nextLeft,t._tY=this._nextTop,this._isActive&&(this._isActive=!1,N(t._element,t.getGrid()._settings.itemPositioningClass)),i._isActive&&i.stop(),e._isActive&&e.stop(),t._emitter.burst(this._queue,!1,t)}};tt.prototype._setupAnimation=function(){var t=this._item;if(t._tX===void 0||t._tY===void 0){var e=K(t._element);t._tX=e.x,t._tY=e.y}};tt.prototype._startAnimation=function(){var t=this._item,e=t.getGrid()._settings,i=this._animOptions.duration<=0;this._updateOffsets();var r=Math.abs(t._left-(t._tX-this._offsetLeft)),s=Math.abs(t._top-(t._tY-this._offsetTop));if(i||r<Fe&&s<Fe){(r||s||this._isInterrupted)&&t._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._isInterrupted||B(t._element,e.itemPositioningClass),this._currentStyles[Z]=st(t._tX,t._tY),this._targetStyles[Z]=st(this._nextLeft,this._nextTop),t._tX=t._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)};function Pt(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}Pt.prototype.start=function(t,e,i){if(!this._isDestroyed){var r=this._item,s=r._element,o=r.isActive(),n=r.isVisible(),a=r.getGrid(),h=a._settings,l=t._settings,_=t._element,v=t._items,S=a._items.indexOf(r),y=i||document.body,D,u,d,g,c,m,p,w,b,P;if(typeof e=="number")D=mt(v,e,1);else{if(u=t.getItem(e),!u)return;D=v.indexOf(u)}(r.isPositioning()||this._isActive||r.isReleasing())&&(m=K(s),p=m.x,w=m.y),r.isPositioning()&&r._layout.stop(!0,p,w),this._isActive&&(p-=this._containerDiffX,w-=this._containerDiffY,this.stop(!0,p,w)),r.isReleasing()&&(p-=r._dragRelease._containerDiffX,w-=r._dragRelease._containerDiffY,r._dragRelease.stop(!0,p,w)),r._visibility.stop(!0),r._drag&&r._drag.destroy(),a._hasListeners(ot)&&a._emit(ot,{item:r,fromGrid:a,fromIndex:S,toGrid:t,toIndex:D}),t._hasListeners(Wt)&&t._emit(Wt,{item:r,fromGrid:a,fromIndex:S,toGrid:t,toIndex:D}),h.itemClass!==l.itemClass&&(N(s,h.itemClass),B(s,l.itemClass)),b=n?h.itemVisibleClass:h.itemHiddenClass,P=n?l.itemVisibleClass:l.itemHiddenClass,b!==P&&(N(s,b),B(s,P)),a._items.splice(S,1),we(v,r,D),r._gridId=t._id,o?(d=s.parentNode,y!==d&&(y.appendChild(s),g=yt(y,d,!0),m||(m=K(s),p=m.x,w=m.y),r._setTranslate(p+g.left,w+g.top))):_.appendChild(s),r._visibility.setStyles(n?l.visibleStyles:l.hiddenStyles),o&&(c=yt(y,_,!0)),r._refreshDimensions(),r._sortData=null,r._drag=l.dragEnabled?new E(r):null,o?(this._isActive=!0,this._container=y,this._containerDiffX=c.left,this._containerDiffY=c.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),a._hasListeners(Vt)&&a._emit(Vt,{item:r,fromGrid:a,fromIndex:S,toGrid:t,toIndex:D}),t._hasListeners(Bt)&&t._emit(Bt,{item:r,fromGrid:a,fromIndex:S,toGrid:t,toIndex:D})}};Pt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var r=this._item,s=r._element,o=r.getGrid(),n=o._element,a;this._container!==n&&((e===void 0||i===void 0)&&(t?(a=K(s),e=a.x-this._containerDiffX,i=a.y-this._containerDiffY):(e=r._left,i=r._top)),n.appendChild(s),r._setTranslate(e,i)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}};Pt.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};function U(t){var e=t._isActive,i=t._element,r=i.children[0],s=t.getGrid()._settings;if(!r)throw new Error("No valid child element found within item element.");this._item=t,this._isDestroyed=!1,this._isHidden=!e,this._isHiding=!1,this._isShowing=!1,this._childElement=r,this._currentStyleProps=[],this._animation=new Q(r),this._queue="visibility-"+t._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),i.style.display=e?"":"none",B(i,e?s.itemVisibleClass:s.itemHiddenClass),this.setStyles(e?s.visibleStyles:s.hiddenStyles)}U.prototype.show=function(t,e){if(!this._isDestroyed){var i=this._item,r=i._element,s=A(e)?e:null,o=i.getGrid(),n=o._settings;if(!this._isShowing&&!this._isHidden){s&&s(!1,i);return}if(this._isShowing&&!t){s&&i._emitter.on(this._queue,s);return}this._isShowing||(i._emitter.burst(this._queue,!0,i),N(r,n.itemHiddenClass),B(r,n.itemVisibleClass),this._isHiding||(r.style.display="")),s&&i._emitter.on(this._queue,s),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,t,this._finishShow)}};U.prototype.hide=function(t,e){if(!this._isDestroyed){var i=this._item,r=i._element,s=A(e)?e:null,o=i.getGrid(),n=o._settings;if(!this._isHiding&&this._isHidden){s&&s(!1,i);return}if(this._isHiding&&!t){s&&i._emitter.on(this._queue,s);return}this._isHiding||(i._emitter.burst(this._queue,!0,i),B(r,n.itemHiddenClass),N(r,n.itemVisibleClass)),s&&i._emitter.on(this._queue,s),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,t,this._finishHide)}};U.prototype.stop=function(t){if(!this._isDestroyed&&!(!this._isHiding&&!this._isShowing)){var e=this._item;Ai(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}};U.prototype.setStyles=function(t){var e=this._childElement,i=this._currentStyleProps;this._removeCurrentStyles();for(var r in t)i.push(r),e.style[r]=t[r]};U.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item,e=t._element,i=t.getGrid(),r=i._settings;this.stop(!0),t._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),N(e,r.itemVisibleClass),N(e,r.itemHiddenClass),e.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}};U.prototype._startAnimation=function(t,e,i){if(!this._isDestroyed){var r=this._item,s=this._animation,o=this._childElement,n=r.getGrid()._settings,a=t?n.visibleStyles:n.hiddenStyles,h=t?n.showDuration:n.hideDuration,l=t?n.showEasing:n.hideEasing,_=e||h<=0,v;if(!a){i&&i();return}if(Ai(r._id),_){St(o,a),s.stop(),i&&i();return}s.isAnimating()&&(s._animation.onfinish=null),Tr(r._id,function(){v=qi(o,a)},function(){s.start(v,a,{duration:h,easing:l,onFinish:i})})}};U.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))};U.prototype._finishHide=function(){if(this._isHidden){var t=this._item;this._isHiding=!1,t._layout.stop(!0,0,0),t._element.style.display="none",t._emitter.burst(this._queue,!1,t)}};U.prototype._removeCurrentStyles=function(){for(var t=this._childElement,e=this._currentStyleProps,i=0;i<e.length;i++)t.style[e[i]]="";e.length=0};var ls=0;function Vi(){return++ls}function L(t,e,i){var r=t._settings;if(dt){if(dt.has(e))throw new Error("You can only create one Muuri Item per element!");dt.set(e,this)}this._id=Vi(),this._gridId=t._id,this._element=e,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new z,e.parentNode!==t._element&&t._element.appendChild(e),B(e,r.itemClass),typeof i!="boolean"&&(i=q(e,"display")!=="none"),this._isActive=i,this._visibility=new U(this),this._layout=new tt(this),this._migrate=new Pt(this),this._drag=r.dragEnabled?new E(this):null,this._dragRelease=new lt(this),this._dragPlaceholder=new G(this)}L.prototype.getGrid=function(){return Qt[this._gridId]};L.prototype.getElement=function(){return this._element};L.prototype.getWidth=function(){return this._width};L.prototype.getHeight=function(){return this._height};L.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}};L.prototype.getPosition=function(){return{left:this._left,top:this._top}};L.prototype.isActive=function(){return this._isActive};L.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden};L.prototype.isShowing=function(){return!!(this._visibility&&this._visibility._isShowing)};L.prototype.isHiding=function(){return!!(this._visibility&&this._visibility._isHiding)};L.prototype.isPositioning=function(){return!!(this._layout&&this._layout._isActive)};L.prototype.isDragging=function(){return!!(this._drag&&this._drag._isActive)};L.prototype.isReleasing=function(){return!!(this._dragRelease&&this._dragRelease._isActive)};L.prototype.isDestroyed=function(){return this._isDestroyed};L.prototype._refreshDimensions=function(t){if(!this._isDestroyed&&!(t!==!0&&this._visibility._isHidden)){var e=this._element,i=this._dragPlaceholder,r=e.getBoundingClientRect();this._width=r.width,this._height=r.height,this._marginLeft=Math.max(0,F(e,"margin-left")),this._marginRight=Math.max(0,F(e,"margin-right")),this._marginTop=Math.max(0,F(e,"margin-top")),this._marginBottom=Math.max(0,F(e,"margin-bottom")),i&&i.updateDimensions()}};L.prototype._refreshSortData=function(){if(!this._isDestroyed){var t=this._sortData={},e=this.getGrid()._settings.sortData,i;for(i in e)t[i]=e[i](this,this._element)}};L.prototype._addToLayout=function(t,e){this._isActive!==!0&&(this._isActive=!0,this._left=t||0,this._top=e||0)};L.prototype._removeFromLayout=function(){this._isActive!==!1&&(this._isActive=!1,this._left=0,this._top=0)};L.prototype._canSkipLayout=function(t,e){return this._left===t&&this._top===e&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()};L.prototype._setTranslate=function(t,e){return this._tX===t&&this._tY===e?!1:(this._tX=t,this._tY=e,this._element.style[Z]=st(t,e),!0)};L.prototype._destroy=function(t){if(!this._isDestroyed){var e=this._element,i=this.getGrid(),r=i._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),N(e,r.itemClass),t&&e.parentNode.removeChild(e),dt&&dt.delete(e),this._isActive=!1,this._isDestroyed=!0}};function Bi(t){var e=1,i=2,r=4,s=8,o=16,n=.001,a=.5;function h(u){return((u*1e3+.5<<0)/10<<0)/100}function l(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(l.prototype.computeLayout=function(u,d){var g=u.items,c=u.slots,m=!!(d&e),p=!!(d&i),w=!!(d&r),b=!!(d&s),P=!!(d&o),M=typeof g[0]=="number",I,$,C,V,it,Y;if(!g.length)return u;for($=M?2:1,I=0;I<g.length;I+=$)M?(V=g[I],it=g[I+1]):(C=g[I],V=C._width+C._marginLeft+C._marginRight,it=C._height+C._marginTop+C._marginBottom),P&&(V=h(V),it=h(it)),Y=this.computeNextSlot(u,V,it,m,p),p?Y.left+Y.width>u.width&&(u.width=Y.left+Y.width):Y.top+Y.height>u.height&&(u.height=Y.top+Y.height),c[++this.slotIndex]=Y.left,c[++this.slotIndex]=Y.top,(w||b)&&this.slotSizes.push(Y.width,Y.height);if(w)for(I=0;I<c.length;I+=2)c[I]=u.width-(c[I]+this.slotSizes[I]);if(b)for(I=1;I<c.length;I+=2)c[I]=u.height-(c[I]+this.slotSizes[I]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,u},l.prototype.computeNextSlot=function(u,d,g,c,m){var p=this.slotData,w=this.currentRects,b=this.nextRects,P=!1,M,I,$,C,V;for(b.length=0,p.left=null,p.top=null,p.width=d,p.height=g,C=0;C<w.length;C++)if(I=w[C],!!I&&(M=this.getRect(I),p.width<=M.width+n&&p.height<=M.height+n)){p.left=M.left,p.top=M.top;break}if(p.left===null&&(m?(p.left=u.width,p.top=0):(p.left=0,p.top=u.height),c||(P=!0)),!m&&p.top+p.height>u.height+n&&(p.left>a&&b.push(this.addRect(0,u.height,p.left,1/0)),p.left+p.width<u.width-a&&b.push(this.addRect(p.left+p.width,u.height,u.width-p.left-p.width,1/0)),u.height=p.top+p.height),m&&p.left+p.width>u.width+n&&(p.top>a&&b.push(this.addRect(u.width,0,1/0,p.top)),p.top+p.height<u.height-a&&b.push(this.addRect(u.width,p.top+p.height,1/0,u.height-p.top-p.height)),u.width=p.left+p.width),!P){for(c&&(C=0);C<w.length;C++)if(I=w[C],!!I)for(M=this.getRect(I),$=this.splitRect(M,p),V=0;V<$.length;V++)I=$[V],M=this.getRect(I),(m?M.left+n<u.width-n:M.top+n<u.height-n)&&b.push(I)}return b.length>1&&this.purgeRects(b).sort(m?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=b,this.nextRects=w,p},l.prototype.addRect=function(u,d,g,c){var m=++this.rectId;return this.rectStore[m]=u||0,this.rectStore[++this.rectId]=d||0,this.rectStore[++this.rectId]=g||0,this.rectStore[++this.rectId]=c||0,m},l.prototype.getRect=function(u,d){return d||(d=this.rectTarget),d.left=this.rectStore[u]||0,d.top=this.rectStore[++u]||0,d.width=this.rectStore[++u]||0,d.height=this.rectStore[++u]||0,d},l.prototype.splitRect=function(){var u=[],d=0,g=0;return function(c,m){return u.length=0,c.left+c.width<=m.left+n||m.left+m.width<=c.left+n||c.top+c.height<=m.top+n||m.top+m.height<=c.top+n?(u.push(this.addRect(c.left,c.top,c.width,c.height)),u):(d=m.left-c.left,d>=a&&u.push(this.addRect(c.left,c.top,d,c.height)),d=c.left+c.width-(m.left+m.width),d>=a&&u.push(this.addRect(m.left+m.width,c.top,d,c.height)),g=m.top-c.top,g>=a&&u.push(this.addRect(c.left,c.top,c.width,g)),g=c.top+c.height-(m.top+m.height),g>=a&&u.push(this.addRect(c.left,m.top+m.height,c.width,g)),u)}}(),l.prototype.isRectAWithinRectB=function(u,d){return u.left+n>=d.left&&u.top+n>=d.top&&u.left+u.width-n<=d.left+d.width&&u.top+u.height-n<=d.top+d.height},l.prototype.purgeRects=function(){var u={},d={};return function(g){for(var c=g.length,m;c--;)if(m=g.length,!!g[c]){for(this.getRect(g[c],u);m--;)if(!(!g[m]||c===m)&&(this.getRect(g[m],d),this.isRectAWithinRectB(u,d))){g[c]=0;break}}return g}}(),l.prototype.sortRectsTopLeft=function(){var u={},d={};return function(g,c){return this.getRect(g,u),this.getRect(c,d),u.top<d.top&&u.top+n<d.top?-1:u.top>d.top&&u.top-n>d.top?1:u.left<d.left&&u.left+n<d.left?-1:u.left>d.left&&u.left-n>d.left?1:0}}(),l.prototype.sortRectsLeftTop=function(){var u={},d={};return function(g,c){return this.getRect(g,u),this.getRect(c,d),u.left<d.left&&u.left+n<d.left?-1:u.left>d.left&&u.left-n<d.left?1:u.top<d.top&&u.top+n<d.top?-1:u.top>d.top&&u.top-n>d.top?1:0}}(),t){var _=1,v=2,S=3,y=4,D=new l;self.onmessage=function(u){var d=new Float32Array(u.data),g=d.subarray(y,d.length),c=new Float32Array(g.length),m=d[S],p={items:g,slots:c,width:d[_],height:d[v]};D.computeLayout(p,m),d[_]=p.width,d[v]=p.height,d.set(p.slots,y),postMessage(d.buffer,[d.buffer])}}return l}var ze=Bi(),gt=null,Gt=[];function _s(t,e){var i=[];if(t>0){gt||(gt=URL.createObjectURL(new Blob(["("+Bi.toString()+")(true)"],{type:"application/javascript"})));for(var r=0,s;r<t;r++)s=new Worker(gt),e&&(s.onmessage=e),i.push(s),Gt.push(s)}return i}function us(t){for(var e,i,r=0;r<t.length;r++)e=t[r],e.onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),i=Gt.indexOf(e),i>-1&&Gt.splice(i,1);gt&&!Gt.length&&(URL.revokeObjectURL(gt),gt=null)}function ds(){return!!(window.Worker&&window.URL&&window.Blob)}var Ue=1,Zt=2,je=4,Ze=8,Qe=16,Wi=0,Fi=1,zi=2,fs=3,pe=4;function et(t,e){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(e),t=typeof t=="number"?Math.max(0,t):0,t&&ds())try{this._workers=_s(t,this._onWorkerMessage)}catch{this._processor=new ze}else this._processor=new ze}et.prototype._sendToWorker=function(){if(!(!this._layoutQueue.length||!this._workers.length)){var t=this._layoutQueue.shift(),e=this._workers.pop(),i=this._layoutWorkerData[t];delete this._layoutWorkerData[t],this._layoutWorkers[t]=e,e.postMessage(i.buffer,[i.buffer])}};et.prototype._onWorkerMessage=function(t){var e=new Float32Array(t.data),i=e[Wi],r=this._layouts[i],s=this._layoutCallbacks[i],o=this._layoutWorkers[i];r&&delete this._layouts[i],s&&delete this._layoutCallbacks[i],o&&delete this._layoutWorkers[i],r&&s&&(r.width=e[Fi],r.height=e[zi],r.slots=e.subarray(pe,e.length),this._finalizeLayout(r),s(r)),o&&(this._workers.push(o),this._sendToWorker())};et.prototype._finalizeLayout=function(t){var e=t._grid,i=t._settings&Zt,r=e._boxSizing==="border-box";return delete t._grid,delete t._settings,t.styles={},i?t.styles.width=(r?t.width+e._borderLeft+e._borderRight:t.width)+"px":t.styles.height=(r?t.height+e._borderTop+e._borderBottom:t.height)+"px",t};et.prototype.setOptions=function(t){if(t){var e;typeof t.fillGaps=="boolean"?e=t.fillGaps?Ue:0:e=this._options&Ue;var i;typeof t.horizontal=="boolean"?i=t.horizontal?Zt:0:i=this._options&Zt;var r;typeof t.alignRight=="boolean"?r=t.alignRight?je:0:r=this._options&je;var s;typeof t.alignBottom=="boolean"?s=t.alignBottom?Ze:0:s=this._options&Ze;var o;typeof t.rounding=="boolean"?o=t.rounding?Qe:0:o=this._options&Qe,this._options=e|i|r|s|o}};et.prototype.createLayout=function(t,e,i,r,s,o){if(this._layouts[e])throw new Error("A layout with the provided id is currently being processed.");var n=this._options&Zt,a={id:e,items:i,slots:null,width:n?0:r,height:n?s:0,_grid:t,_settings:this._options};if(!i.length){a.slots=[],this._finalizeLayout(a),o(a);return}if(this._processor){a.slots=window.Float32Array?new Float32Array(i.length*2):new Array(i.length*2),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),o(a);return}var h=new Float32Array(pe+i.length*2);h[Wi]=e,h[Fi]=a.width,h[zi]=a.height,h[fs]=a._settings;var l,_,v;for(l=0,_=pe-1,v;l<i.length;l++)v=i[l],h[++_]=v._width+v._marginLeft+v._marginRight,h[++_]=v._height+v._marginTop+v._marginBottom;return this._layoutQueue.push(e),this._layouts[e]=a,this._layoutCallbacks[e]=o,this._layoutWorkerData[e]=h,this._sendToWorker(),this.cancelLayout.bind(this,e)};et.prototype.cancelLayout=function(t){var e=this._layouts[t];if(e&&(delete this._layouts[t],delete this._layoutCallbacks[t],this._layoutWorkerData[t])){delete this._layoutWorkerData[t];var i=this._layoutQueue.indexOf(t);i>-1&&this._layoutQueue.splice(i,1)}};et.prototype.destroy=function(){for(var t in this._layoutWorkers)this._workers.push(this._layoutWorkers[t]);us(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var cs=0;function vs(t,e){var i=++cs,r=0,s=0,o=!1,n=function(a){o||(s&&(r-=a-s),s=a,r>0?Cr(i,n):(r=s=0,t()))};return function(a){if(!o){if(e<=0){a!==!0&&t();return}if(a===!0){o=!0,r=s=0,n=void 0,Pr(i);return}r<=0?(r=e,n(0)):r=e}}}var ps="[object HTMLCollection]",gs="[object NodeList]";function Ae(t){var e=Object.prototype.toString.call(t);return e===ps||e===gs}var ms="object",ys="[object Object]",Ss=Object.prototype.toString;function $e(t){return typeof t===ms&&Ss.call(t)===ys}function Ds(){}function Es(t){return Ae(t)?Array.prototype.slice.call(t):Array.prototype.concat(t)}var Ui="number",re="string",at="instant",ue=0;function T(t,e){typeof t===re&&(t=document.querySelector(t));var i=t.getRootNode?t.getRootNode({composed:!0})===document:document.body.contains(t);if(!i||t===document.documentElement)throw new Error("Container element must be an existing DOM element.");var r=Ts(T.defaultOptions,e);r.visibleStyles=Ke(r.visibleStyles),r.hiddenStyles=Ke(r.hiddenStyles),A(r.dragSort)||(r.dragSort=!!r.dragSort),this._id=Vi(),this._element=t,this._settings=r,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new z,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),Qt[this._id]=this,B(t,r.containerClass),As(this,r.layoutOnResize),this.add(ws(t,r.items),{layout:!1}),r.layoutOnInit&&this.layout(!0)}T.Item=L;T.ItemLayout=tt;T.ItemVisibility=U;T.ItemMigrate=Pt;T.ItemDrag=E;T.ItemDragRelease=lt;T.ItemDragPlaceholder=G;T.Emitter=z;T.Animator=Q;T.Dragger=f;T.Packer=et;T.AutoScroller=R;T.defaultPacker=new et(2);T.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:ft,migrateAction:ft},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:R.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"};T.prototype.on=function(t,e){return this._emitter.on(t,e),this};T.prototype.off=function(t,e){return this._emitter.off(t,e),this};T.prototype.getElement=function(){return this._element};T.prototype.getItem=function(t){if(this._isDestroyed||!t&&t!==0)return null;if(typeof t===Ui)return this._items[t>-1?t:this._items.length+t]||null;if(t instanceof L)return t._gridId===this._id?t:null;if(dt){var e=dt.get(t);return e&&e._gridId===this._id?e:null}else for(var i=0;i<this._items.length;i++)if(this._items[i]._element===t)return this._items[i];return null};T.prototype.getItems=function(t){if(this._isDestroyed||t===void 0)return this._items.slice(0);var e=[],i,r;if(Array.isArray(t)||Ae(t))for(i=0;i<t.length;i++)r=this.getItem(t[i]),r&&e.push(r);else r=this.getItem(t),r&&e.push(r);return e};T.prototype.refreshItems=function(t,e){if(this._isDestroyed)return this;var i=t||this._items,r,s,o,n;if(e===!0)for(n=[],r=0;r<i.length;r++)s=i[r],!s.isVisible()&&!s.isHiding()&&(o=s.getElement().style,o.visibility="hidden",o.display="",n.push(o));for(r=0;r<i.length;r++)i[r]._refreshDimensions(e);if(e===!0){for(r=0;r<n.length;r++)o=n[r],o.visibility="",o.display="none";n.length=0}return this};T.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;for(var e=t||this._items,i=0;i<e.length;i++)e[i]._refreshSortData();return this};T.prototype.synchronize=function(){if(this._isDestroyed)return this;var t=this._items;if(!t.length)return this;for(var e,i,r=0;r<t.length;r++)i=t[r]._element,i.parentNode===this._element&&(e=e||document.createDocumentFragment(),e.appendChild(i));return e?(this._element.appendChild(e),this._emit(ir),this):this};T.prototype.layout=function(t,e){if(this._isDestroyed)return this;var i=this._nextLayoutData;i&&A(i.cancel)&&i.cancel(),ue=ue%fr+1;var r=ue;this._nextLayoutData={id:r,instant:t,onFinish:e,cancel:null};for(var s=this._items,o=[],n=0;n<s.length;n++)s[n]._isActive&&o.push(s[n]);this._refreshDimensions();var a=this._width-this._borderLeft-this._borderRight,h=this._height-this._borderTop-this._borderBottom,l=this._settings.layout,_;return A(l)?_=l(this,r,o,a,h,this._onLayoutDataReceived):(T.defaultPacker.setOptions(l),_=T.defaultPacker.createLayout(this,r,o,a,h,this._onLayoutDataReceived)),A(_)&&this._nextLayoutData&&this._nextLayoutData.id===r&&(this._nextLayoutData.cancel=_),this};T.prototype.add=function(t,e){if(this._isDestroyed||!t)return[];var i=Es(t);if(!i.length)return i;var r=e||{},s=r.layout?r.layout:r.layout===void 0,o=this._items,n=!1,a,h,l,_;for(_=0;_<i.length;_++)h=i[_],h.parentNode!==this._element&&(a=a||document.createDocumentFragment(),a.appendChild(h));for(a&&this._element.appendChild(a),_=0;_<i.length;_++)h=i[_],l=i[_]=new L(this,h,r.active),l._isActive&&(n=!0,l._layout._skipNextAnimation=!0);for(_=0;_<i.length;_++)l=i[_],l._refreshDimensions(),l._refreshSortData();return we(o,i,r.index),this._hasListeners(Me)&&this._emit(Me,i.slice(0)),n&&s&&this.layout(s===at,A(s)?s:void 0),i};T.prototype.remove=function(t,e){if(this._isDestroyed||!t.length)return[];var i=e||{},r=i.layout?i.layout:i.layout===void 0,s=!1,o=this.getItems(),n=[],a=[],h,l,_;for(_=0;_<t.length;_++)l=t[_],!l._isDestroyed&&(h=this._items.indexOf(l),h!==-1&&(l._isActive&&(s=!0),n.push(l),a.push(o.indexOf(l)),l._destroy(i.removeElements),this._items.splice(h,1)));return this._hasListeners(Oe)&&this._emit(Oe,n.slice(0),a),s&&r&&this.layout(r===at,A(r)?r:void 0),n};T.prototype.show=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!0,e),this};T.prototype.hide=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!1,e),this};T.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var i=[],r=[],s=typeof t===re,o=A(t),n=e||{},a=n.instant===!0,h=n.syncWithLayout,l=n.layout?n.layout:n.layout===void 0,_=A(n.onFinish)?n.onFinish:null,v=-1,S=Ds,y,D;if(_&&(S=function(){++v&&_(i.slice(0),r.slice(0))}),o||s)for(D=0;D<this._items.length;D++)y=this._items[D],(o?t(y):ie(y._element,t))?i.push(y):r.push(y);return i.length?this.show(i,{instant:a,syncWithLayout:h,onFinish:S,layout:!1}):S(),r.length?this.hide(r,{instant:a,syncWithLayout:h,onFinish:S,layout:!1}):S(),(i.length||r.length)&&(this._hasListeners(Ye)&&this._emit(Ye,i.slice(0),r.slice(0)),l&&this.layout(l===at,A(l)?l:void 0)),this};T.prototype.sort=function(){var t,e,i,r;function s(n,a){for(var h=0,l,_,v,S,y=0;y<t.length;y++)if(l=t[y][0],_=t[y][1],v=(n._sortData?n:n._refreshSortData())._sortData[l],S=(a._sortData?a:a._refreshSortData())._sortData[l],_==="desc"||!_&&e?h=S<v?-1:S>v?1:0:h=v<S?-1:v>S?1:0,h)return h;return h||(r||(r=Je(i)),h=e?Ht(r,a,n):Ht(r,n,a)),h}function o(n,a){var h=e?-t(n,a):t(n,a);return h||(r||(r=Je(i)),h=e?Ht(r,a,n):Ht(r,n,a)),h}return function(n,a){if(this._isDestroyed||this._items.length<2)return this;var h=this._items,l=a||{},_=l.layout?l.layout:l.layout===void 0;if(e=!!l.descending,i=h.slice(0),r=null,A(n))t=n,h.sort(o);else if(typeof n===re)t=n.trim().split(" ").filter(function(v){return v}).map(function(v){return v.split(":")}),h.sort(s);else if(Array.isArray(n))h.length=0,h.push.apply(h,n);else throw t=e=i=r=null,new Error("Invalid comparer argument provided.");return this._hasListeners(Ne)&&this._emit(Ne,h.slice(0),i),_&&this.layout(_===at,A(_)?_:void 0),t=e=i=r=null,this}}();T.prototype.move=function(t,e,i){if(this._isDestroyed||this._items.length<2)return this;var r=this._items,s=i||{},o=s.layout?s.layout:s.layout===void 0,n=s.action===j,a=n?j:ft,h=this.getItem(t),l=this.getItem(e),_,v;return h&&l&&h!==l&&(_=r.indexOf(h),v=r.indexOf(l),n?Xi(r,_,v):Ni(r,_,v),this._hasListeners(qt)&&this._emit(qt,{item:h,fromIndex:_,toIndex:v,action:a}),o&&this.layout(o===at,A(o)?o:void 0)),this};T.prototype.send=function(t,e,i,r){if(this._isDestroyed||e._isDestroyed||this===e)return this;if(t=this.getItem(t),!t)return this;var s=r||{},o=s.appendTo||document.body,n=s.layoutSender?s.layoutSender:s.layoutSender===void 0,a=s.layoutReceiver?s.layoutReceiver:s.layoutReceiver===void 0;return t._migrate.start(e,i,o),t._migrate._isActive&&t._isActive&&(n&&this.layout(n===at,A(n)?n:void 0),a&&e.layout(a===at,A(a)?a:void 0)),this};T.prototype.destroy=function(t){if(this._isDestroyed)return this;var e=this._element,i=this._items.slice(0),r=this._layout&&this._layout.styles||{},s,o;for(xs(this),s=0;s<i.length;s++)i[s]._destroy(t);this._items.length=0,N(e,this._settings.containerClass);for(o in r)e.style[o]="";return this._emit(dr),this._emitter.destroy(),delete Qt[this._id],this._isDestroyed=!0,this};T.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)};T.prototype._hasListeners=function(t){return this._isDestroyed?!1:this._emitter.countListeners(t)>0};T.prototype._updateBoundingRect=function(){var t=this._element,e=t.getBoundingClientRect();this._width=e.width,this._height=e.height,this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom};T.prototype._updateBorders=function(t,e,i,r){var s=this._element;t&&(this._borderLeft=F(s,"border-left-width")),e&&(this._borderRight=F(s,"border-right-width")),i&&(this._borderTop=F(s,"border-top-width")),r&&(this._borderBottom=F(s,"border-bottom-width"))};T.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=q(this._element,"box-sizing")};T.prototype._onLayoutDataReceived=function(){var t=[];return function(e){if(!(this._isDestroyed||!this._nextLayoutData||this._nextLayoutData.id!==e.id)){var i=this,r=this._nextLayoutData.instant,s=this._nextLayoutData.onFinish,o=e.items.length,n=o,a,h,l,_;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(Pe)&&this._emit(Pe,this._layout.items.slice(0)),this._layout=e,t.length=0,_=0;_<o;_++){if(a=e.items[_],!a){--n;continue}if(h=e.slots[_*2],l=e.slots[_*2+1],a._canSkipLayout(h,l)){--n;continue}a._left=h,a._top=l,a.isActive()&&!a.isDragging()?t.push(a):--n}if(e.styles&&St(this._element,e.styles),!(this._hasListeners(nt)&&(this._emit(nt,e.items.slice(0),r===!0),this._layout.id!==e.id))){var v=function(){if(!(--n>0)){var S=i._layout.id!==e.id,y=A(r)?r:s;S||(i._isLayoutFinished=!0),A(y)&&y(e.items.slice(0),S),!S&&i._hasListeners(Ce)&&i._emit(Ce,e.items.slice(0))}};if(!t.length)return v(),this;for(this._isLayoutFinished=!1,_=0;_<t.length&&this._layout.id===e.id;_++)t[_]._layout.start(r===!0,v);return this._layout.id===e.id&&(t.length=0),this}}}}();T.prototype._setItemsVisibility=function(t,e,i){var r=this,s=t.slice(0),o=i||{},n=o.instant===!0,a=o.onFinish,h=o.layout?o.layout:o.layout===void 0,l=s.length,_=e?rr:wt,v=e?sr:nr,S=e?"show":"hide",y=!1,D=[],u=[],d,g;if(!l){A(a)&&a(s);return}for(g=0;g<s.length;g++)d=s[g],(e&&!d._isActive||!e&&d._isActive)&&(y=!0),d._layout._skipNextAnimation=!!(e&&!d._isActive),e&&d._visibility._isHidden&&u.push(d),e?d._addToLayout():d._removeFromLayout();u.length&&(this.refreshItems(u,!0),u.length=0);function c(){for(y&&o.syncWithLayout!==!1&&r.off(nt,c),r._hasListeners(_)&&r._emit(_,s.slice(0)),g=0;g<s.length;g++){if(s[g]._gridId!==r._id){--l<1&&(A(a)&&a(D.slice(0)),r._hasListeners(v)&&r._emit(v,D.slice(0)));continue}s[g]._visibility[S](n,function(m,p){m||D.push(p),--l<1&&(A(a)&&a(D.slice(0)),r._hasListeners(v)&&r._emit(v,D.slice(0)))})}}y&&o.syncWithLayout!==!1?this.on(nt,c):c(),y&&h&&this.layout(h===at,A(h)?h:void 0)};function Ts(t,e){var i=Tt({},t);return e&&(i=Tt(i,e)),e&&e.visibleStyles?i.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(i.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?i.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(i.hiddenStyles=t.hiddenStyles),i}function Tt(t,e){var i=Object.keys(e),r=i.length,s,o,n;for(n=0;n<r;n++){if(o=i[n],s=$e(e[o]),$e(t[o])&&s){t[o]=Tt(Tt({},t[o]),e[o]);continue}if(s){t[o]=Tt({},e[o]);continue}if(Array.isArray(e[o])){t[o]=e[o].slice(0);continue}t[o]=e[o]}return t}function ws(t,e){if(e==="*")return t.children;if(typeof e===re){for(var i=[],r=t.children,s=0;s<r.length;s++)ie(r[s],e)&&i.push(r[s]);return i}return Array.isArray(e)||Ae(e)?e:[]}function As(t,e){typeof e!==Ui&&(e=e===!0?0:-1),e>=0&&(t._resizeHandler=vs(function(){t.refreshItems().layout()},e),window.addEventListener("resize",t._resizeHandler))}function xs(t){t._resizeHandler&&(t._resizeHandler(!0),window.removeEventListener("resize",t._resizeHandler),t._resizeHandler=null)}function Ke(t){var e={},i=document.documentElement.style,r,s;for(r in t)t[r]&&(s=Kt(i,r),s&&(e[s]=t[r]));return e}function Je(t){for(var e={},i=0;i<t.length;i++)e[t[i]._id]=i;return e}function Ht(t,e,i){var r=t[e._id],s=t[i._id];return r-s}const Rs={class:"flex"},bs=W("div",{class:"slides grid"},[W("div",{class:"item"},[W("div",{class:"slide"})])],-1),Is=W("i",{class:"fa-solid fa-add"},null,-1),Ls=ge({__name:"SlideView",props:{slides:Array,width:String,height:String},emits:["new_slide"],setup(t){Zi(o=>({"0fc382f8":oe(i),"1c4acfae":oe(r)}));const e=t;let i=ut(0),r=ut(0),s=()=>{};return Qi(()=>{i.value=Number((/\d+/g.exec(e.width??"1920px")??[0])[0]),r.value=Number((/\d+/g.exec(e.height??"1080px")??[0])[0])}),ii(()=>{let o=new T(".grid",{dragEnabled:!0,layout:{horizontal:!1}});s=()=>{let n=document.createElement("div");n.classList.add("item");let a=document.createElement("div");n.classList.add("slide"),n.appendChild(a),o.add(n)}}),(o,n)=>(ye(),me("div",Rs,[bs,W("button",{onClick:n[0]||(n[0]=()=>{oe(s)(),o.$emit("new_slide")})},[Is,ti(" New Slide")])]))}});const ks={class:"main"},Cs={class:"bottom"},Ps=ge({__name:"Slides",props:{language:String},setup(t){const e=$i(),i=Ki(),r=ut("Loading..."),s=ut("0"),o=ut("0"),n=ut([]);ii(async()=>{const{data:h,error:l}=await Ji.from("Projects").select("*").eq("id",e.params.id);if(l&&i.push("/404"),!h)return;const _=h[0];console.log(_),r.value=_.name,s.value=_.content.metadata.width,o.value=_.content.metadata.height,n.value=_.content.data});const a=()=>{const h=Math.random().toString();n.value.push([{id:h}])};return(h,l)=>(ye(),me("div",ks,[ke(er,{name:r.value,width:s.value,height:o.value,language:t.language},null,8,["name","width","height","language"]),W("div",Cs,[ke(Ls,{slides:n.value,width:s.value,height:o.value,onNew_slide:a},null,8,["slides","width","height"])])]))}});const Ys=ei(Ps,[["__scopeId","data-v-788a9201"]]);export{Ys as default};

import{d as M,j as m,s as T,v as L,x as U,y as O,c as j,a as e,n as B,t as n,r as q,m as A,o as h,_ as V,g as W,u as Y,e as G,i as H,w as J,z as s,q as K,l as D,F as I,A as Q,k as X,B as Z,C as ee,D as te,p as ae,b as oe}from"./index-aadf34d5.js";import{s as p}from"./supabase-6147ff89.js";import{E as se}from"./ErrorBox-0c75d0fe.js";const ne=["onClick"],re=M({__name:"Dialogue",props:{title:String,content:String,theme:String,opened:Boolean},setup(o){const x=o,t=m(!1),l=m(!1),u=T(x,"opened"),c=()=>t.value=!t.value,r=()=>l.value=!1;return L(u,()=>{l.value=!l.value}),(w,d)=>U((h(),j("div",{class:"backdrop",onClick:A(r,["self"])},[e("div",{class:B({modal:!0,cpb:o.theme==="corporate-bullshit"})},[e("i",{class:B(["fa-solid",t.value?"fa-circle-xmark":"fa-xmark",t.value?"fa-1.5x":""]),onMouseover:c,onMouseout:c,onClick:r},null,34),e("h1",null,n(o.title),1),e("p",null,n(o.content),1),q(w.$slots,"default",{},void 0,!0)],2)],8,ne)),[[O,l.value]])}});const le=V(re,[["__scopeId","data-v-1d920dad"]]),C=o=>(ae("data-v-fe0b3cad"),o=o(),oe(),o),ce={style:{"font-size":"1.5rem",margin:"0"}},ie=["placeholder"],ue=C(()=>e("br",null,null,-1)),de=C(()=>e("br",null,null,-1)),_e={class:"user"},pe={class:"userblock"},he=["src"],me={class:"projects"},ve={class:"big"},ge=C(()=>e("i",{class:"fa-solid fa-add"},null,-1)),fe={class:"project-panel"},je={key:0,class:"blank"},we=["onClick"],ye=M({__name:"Projects",props:{language:String},setup(o){const x=o,t=W(()=>{switch(x.language){case"en":return{projects:"Projects",new_project:"New Project",untitled_project:"Untitled Project",loading:"Loading...",no_project:"No Projects Found... Maybe create a new one?",project_name:"Project Name",sign_out:"Sign Out"};default:return{projects:"โปรเจกต์",project_name:"โปรเจกต์ชื่อว่า...",new_project:"สร้างโปรเจกต์ใหม่",untitled_project:"ไม่มีชื่อ",loading:"โหลดอยู่ค้าบ",no_project:"ไม่มีโปรเจกต์เลย... ลองสร้างก่อนไหม :]",sign_out:"ออกละ ไม่อยู่ละ"}}});let l=m(!1),u=m({}),c=null,r=m("");const w=Y(),d=G();let P=p.auth.getUser().then(a=>{a.error&&(console.clear(),d.push("/sign-up"))});!w.hash&&!P?(console.log(P),d.push("/sign-up")):(w.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:a}}=await p.auth.getUser();u.value=a})());const S=()=>{l.value=!l.value},z=async()=>{let{error:a}=await p.auth.signOut();if(a)return c="You are stuck here. No changing.",c;d.push("/")},R=async a=>{S();const _=[{uid:u.value.id,status:"owner"}],{data:b,error:v}=await p.from("Teams").insert([{team_members:_}]).select();if(v)return c="Please wait until we have a stable connection to the database.",v;const k=b[0].id,{data:g,error:f}=await p.from("Projects").insert([{name:a??"Untitled Project",type:"slide",content:{metadata:{width:"1920px",height:"1080px"},data:[[{id:"1",tag:"h1",inner_text:"hello"}]]},team_id:k}]).select();if(f)return c="Please wait until we have a stable connection to the database.",f;d.push(`/${g[0].type}/${g[0].id}`)},E=async a=>{d.push(`/${a.type}/${a.id}`)};let y=m({data:{},error:null});return(async()=>y.value=await p.from("Projects").select("name,id,type"))(),(a,_)=>{var b,v,k,g,f,$,N;return h(),j(I,null,[H(le,{title:t.value.new_project,opened:s(l)},{default:J(()=>[e("p",ce,n(t.value.project_name),1),U(e("input",{type:"text",placeholder:t.value.untitled_project,"onUpdate:modelValue":_[0]||(_[0]=i=>ee(r)?r.value=i:r=i)},null,8,ie),[[Z,s(r)]]),ue,de,e("button",{class:"new bouncy",onClick:_[1]||(_[1]=i=>R(s(r)?s(r):t.value.no_project))},n(t.value.new_project+"!"),1)]),_:1},8,["title","opened"]),e("div",_e,[e("div",pe,[e("img",{class:"profile",src:((v=(b=s(u))==null?void 0:b.user_metadata)==null?void 0:v.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,he),e("h1",null,n(((g=(k=s(u))==null?void 0:k.user_metadata)==null?void 0:g.name)??t.value.loading),1)]),e("button",{class:"sign-out",onClick:z},n(t.value.sign_out),1)]),e("div",me,[e("h1",ve,n(t.value.projects),1),e("button",{onClick:S,class:"bouncy"},[ge,K(" "+n(t.value.new_project),1)])]),e("div",fe,[(f=s(y))!=null&&f.data[0]?D("",!0):(h(),j("p",je,n(t.value.no_project),1)),(h(!0),j(I,null,Q(($=s(y))==null?void 0:$.data,(i,F)=>(h(),j("div",{class:"project bouncy",style:te(`--anim-order: ${F}`),onClick:be=>E(i)},[e("p",null,n((i==null?void 0:i.name)??"What the fuck is in ur config?"),1)],12,we))),256))]),s(c)?(h(),X(se,{key:0,msg:(N=s(y))==null?void 0:N.error},null,8,["msg"])):D("",!0)],64)}}});const Pe=V(ye,[["__scopeId","data-v-fe0b3cad"]]);export{Pe as default};

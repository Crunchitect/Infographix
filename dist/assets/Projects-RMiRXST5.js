import{d as M,i as u,n as O,q,s as U,v as A,a as w,b as e,x as $,t as n,y as H,j as V,g as h,_ as z,c as W,e as Y,w as G,z as s,m as J,l as B,F as D,A as K,k as Q,u as X,f as Z,B as ee,C as te,D as ae,p as oe,h as se}from"./index-PPdYflZY.js";import{s as m}from"./supabase-S1k0-8Md.js";import{E as ne}from"./ErrorBox-UIbC5HMN.js";import{g as I}from"./generate_uuid-F73_iyBE.js";const re=M({__name:"Dialogue",props:{title:String,content:String,theme:String,opened:Boolean},setup(o){const x=o,t=u(!1),l=u(!1),d=O(x,"opened"),c=()=>t.value=!t.value,r=()=>l.value=!1;return q(d,()=>{l.value=!l.value}),(b,p)=>U((h(),w("div",{class:"backdrop",onClick:V(r,["self"])},[e("div",{class:$({modal:!0,cpb:o.theme==="corporate-bullshit"})},[e("i",{class:$(["fa-solid",t.value?"fa-circle-xmark":"fa-xmark",t.value?"fa-1.5x":""]),onMouseover:c,onMouseout:c,onClick:r},null,34),e("h1",null,n(o.title),1),e("p",null,n(o.content),1),H(b.$slots,"default",{},void 0,!0)],2)],512)),[[A,l.value]])}}),le=z(re,[["__scopeId","data-v-3b57325a"]]),S=o=>(oe("data-v-83b55633"),o=o(),se(),o),ce={style:{"font-size":"1.5rem",margin:"0"}},ie=["placeholder"],ue=S(()=>e("br",null,null,-1)),de=S(()=>e("br",null,null,-1)),pe={class:"new bouncy"},_e={class:"user"},me={class:"userblock"},he=["src"],ve={class:"projects"},fe={class:"big"},ge=S(()=>e("i",{class:"fa-solid fa-add"},null,-1)),je={class:"project-panel"},we={key:0,class:"blank"},be=["onClick"],ye=M({__name:"Projects",props:{language:String},setup(o){const x=o,t=W(()=>{switch(x.language){case"en":return{projects:"Projects",new_project:"New Project",untitled_project:"Untitled Project",loading:"Loading...",no_project:"No Projects Found... Maybe create a new one?",project_name:"Project Name",sign_out:"Sign Out"};default:return{projects:"โปรเจกต์",project_name:"โปรเจกต์ชื่อว่า...",new_project:"สร้างโปรเจกต์ใหม่",untitled_project:"ไม่มีชื่อ",loading:"โหลดอยู่ค้าบ",no_project:"ไม่มีโปรเจกต์เลย... ลองสร้างก่อนไหม :]",sign_out:"ออกละ ไม่อยู่ละ"}}});let l=u(!1),d=u({}),c=null,r=u("");const b=X(),p=Z();let R=m.auth.getUser().then(a=>{a.error&&(console.clear(),p.push("/sign-up"))});!b.hash&&!R?p.push("/sign-up"):(b.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:a}}=await m.auth.getUser();d.value=a})());const P=()=>{l.value=!l.value},E=async()=>{let{error:a}=await m.auth.signOut();if(a)return c="You are stuck here. No changing.",c;p.push("/")},F=async a=>{P();const _=[{email:d.value.email,status:"owner"}],{data:v,error:f}=await m.from("Teams").insert([{team_members:_}]).select();if(f)return c="Please wait until we have a stable connection to the database.",f;const k=v[0].id;u(v[0].id);const{data:g,error:j}=await m.from("Projects").insert([{name:a??"Untitled Project",type:"slide",content:{metadata:{width:"1920px",height:"1080px"},data:[{id:I(),content:[{id:I(),tag:"h1",content:"Hello!",position:{x:69,y:420,w:420,h:69}}]}]},team_id:k}]).select();if(j)return c="Please wait until we have a stable connection to the database.",j;p.push(`/${g[0].type}/${g[0].id}`)},T=async a=>{p.push(`/${a.type}/${a.id}`)};let y=u({data:{},error:null});return(async()=>y.value=await m.from("Projects").select("name,id,type"))(),(a,_)=>{var v,f,k,g,j,C,N;return h(),w(D,null,[Y(le,{title:t.value.new_project,opened:s(l)},{default:G(()=>[e("p",ce,n(t.value.project_name),1),e("form",{onSubmit:_[1]||(_[1]=V(i=>F(s(r)?s(r):t.value.no_project),["prevent"]))},[U(e("input",{type:"text",placeholder:t.value.untitled_project,"onUpdate:modelValue":_[0]||(_[0]=i=>te(r)?r.value=i:r=i)},null,8,ie),[[ee,s(r)]]),ue,de,e("button",pe,n(t.value.new_project+"!"),1)],32)]),_:1},8,["title","opened"]),e("div",_e,[e("div",me,[e("img",{class:"profile",src:((f=(v=s(d))==null?void 0:v.user_metadata)==null?void 0:f.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,he),e("h1",null,n(((g=(k=s(d))==null?void 0:k.user_metadata)==null?void 0:g.name)??t.value.loading),1)]),e("button",{class:"sign-out",onClick:E},n(t.value.sign_out),1)]),e("div",ve,[e("h1",fe,n(t.value.projects),1),e("button",{onClick:P,class:"bouncy"},[ge,J(" "+n(t.value.new_project),1)])]),e("div",je,[(j=s(y))!=null&&j.data[0]?B("",!0):(h(),w("p",we,n(t.value.no_project),1)),(h(!0),w(D,null,K((C=s(y))==null?void 0:C.data,(i,L)=>(h(),w("div",{class:"project bouncy",style:ae(`--anim-order: ${L}`),onClick:ke=>T(i)},[e("p",null,n((i==null?void 0:i.name)??"What the fuck is in ur config?"),1)],12,be))),256))]),s(c)?(h(),Q(ne,{key:0,msg:(N=s(y))==null?void 0:N.error},null,8,["msg"])):B("",!0)],64)}}}),Ne=z(ye,[["__scopeId","data-v-83b55633"]]);export{Ne as default};

import{d as I,l as _,m as $,q as E,s as M,v as F,o as d,c as v,a as e,n as N,t as x,r as T,h as L,_ as U,u as O,e as q,f as A,w as W,x as Y,y as o,z as G,k as H,j as B,F as D,A as J,i as K,B as Q,p as X,b as Z}from"./index-10a59131.js";import{s as u,E as ee}from"./ErrorBox-efcdf8fa.js";const te=["onClick"],se=I({__name:"Dialogue",props:{title:String,content:String,theme:String,opened:Boolean},setup(s){const p=s,a=_(!1),t=_(!1),r=$(p,"opened"),h=()=>a.value=!a.value,c=()=>t.value=!1;return E(r,()=>{t.value=!t.value}),(w,j)=>M((d(),v("div",{class:"backdrop",onClick:L(c,["self"])},[e("div",{class:N({modal:!0,cpb:s.theme==="corporate-bullshit"})},[e("i",{class:N(["fa-solid",a.value?"fa-circle-xmark":"fa-xmark",a.value?"fa-1.5x":""]),onMouseover:h,onMouseout:h,onClick:c},null,34),e("h1",null,x(s.title),1),e("p",null,x(s.content),1),T(w.$slots,"default",{},void 0,!0)],2)],8,te)),[[F,t.value]])}});const ae=U(se,[["__scopeId","data-v-706792ef"]]),g=s=>(X("data-v-d5509113"),s=s(),Z(),s),oe=g(()=>e("p",{style:{"font-size":"3rem"}},"Project Name: ",-1)),ne=g(()=>e("br",null,null,-1)),re=g(()=>e("br",null,null,-1)),le={class:"user"},ce={class:"userblock"},ie=["src"],ue=g(()=>e("h1",{class:"big"},"Projects",-1)),de=g(()=>e("i",{class:"fa-solid fa-add"},null,-1)),_e={class:"project-panel"},pe={key:0,class:"blank"},he=I({__name:"Projects",props:{language:String},setup(s){let p=_(!1),a=_({}),t=null,r=_("");const h=O(),c=q();let w=u.auth.getUser().then(n=>{n.error&&(console.clear(),c.push("/sign-up"))});!h.hash&&!w?(console.log(w),c.push("/sign-up")):(h.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:n}}=await u.auth.getUser();a.value=n})());const j=()=>{p.value=!p.value},V=async()=>{let{error:n}=await u.auth.signOut();if(n)return t="You are stuck here. No changing.",t;c.push("/")},z=async n=>{j();const i=[{uid:a.value.id,status:"owner"}],{data:y,error:m}=await u.from("Teams").insert([{team_members:i}]).select();if(m)return t="Please wait until we have a stable connection to the database.",m;const k=y[0].id,{data:P,error:f}=await u.from("Projects").insert([{name:n,type:"slide",content:{metadata:{width:"1920px",height:"1080px"},data:[[{id:"1",tag:"h1",inner_text:"hello"}]]},team_id:k}]).select();if(f)return t="Please wait until we have a stable connection to the database.",f};let b=_({data:{},error:null});return(async()=>b.value=await u.from("Projects").select("name"))(),(n,i)=>{var y,m,k,P,f,S,C;return d(),v(D,null,[A(ae,{title:"New Project",opened:o(p)},{default:W(()=>[oe,M(e("input",{type:"text",placeholder:"Untitled Project","onUpdate:modelValue":i[0]||(i[0]=l=>G(r)?r.value=l:r=l)},null,512),[[Y,o(r)]]),ne,re,e("button",{class:"new bouncy",onClick:i[1]||(i[1]=l=>z(o(r)??"Untitled Project"))},"New Project!")]),_:1},8,["opened"]),e("div",le,[e("div",ce,[e("img",{class:"profile",src:((m=(y=o(a))==null?void 0:y.user_metadata)==null?void 0:m.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,ie),e("h1",null,x(((P=(k=o(a))==null?void 0:k.user_metadata)==null?void 0:P.name)??"Loading..."),1)]),e("button",{class:"sign-out",onClick:V},"Sign Out")]),e("div",{class:"projects"},[ue,e("button",{onClick:j,class:"bouncy"},[de,H(" New Project")])]),e("div",_e,[(f=o(b))!=null&&f.data[0]?B("",!0):(d(),v("p",pe,"No Projects Found... Maybe create a new one?")),(d(!0),v(D,null,J((S=o(b))==null?void 0:S.data,(l,R)=>(d(),v("div",{class:"project bouncy",style:Q(`--anim-order: ${R}`)},[e("p",null,x((l==null?void 0:l.name)??"What the fuck is in ur config?"),1)],4))),256))]),o(t)?(d(),K(ee,{key:0,msg:(C=o(b))==null?void 0:C.error},null,8,["msg"])):B("",!0)],64)}}});const ve=U(he,[["__scopeId","data-v-d5509113"]]);export{ve as default};

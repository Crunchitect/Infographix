import{d as D,j as _,s as E,v as F,x as I,y as T,c as g,a as e,n as N,t as j,r as L,m as O,o as d,_ as M,u as q,e as A,i as W,w as Y,z as n,q as G,l as $,F as B,A as H,k as J,B as K,C as Q,D as X,p as Z,b as ee}from"./index-36498ea7.js";import{s as u}from"./supabase-7a57e895.js";import{E as te}from"./ErrorBox-0ac8b72b.js";const se=["onClick"],ae=D({__name:"Dialogue",props:{title:String,content:String,theme:String,opened:Boolean},setup(a){const p=a,o=_(!1),s=_(!1),c=E(p,"opened"),h=()=>o.value=!o.value,r=()=>s.value=!1;return F(c,()=>{s.value=!s.value}),(b,P)=>I((d(),g("div",{class:"backdrop",onClick:O(r,["self"])},[e("div",{class:N({modal:!0,cpb:a.theme==="corporate-bullshit"})},[e("i",{class:N(["fa-solid",o.value?"fa-circle-xmark":"fa-xmark",o.value?"fa-1.5x":""]),onMouseover:h,onMouseout:h,onClick:r},null,34),e("h1",null,j(a.title),1),e("p",null,j(a.content),1),L(b.$slots,"default",{},void 0,!0)],2)],8,se)),[[T,s.value]])}});const oe=M(ae,[["__scopeId","data-v-706792ef"]]),y=a=>(Z("data-v-7a5bcdd3"),a=a(),ee(),a),ne=y(()=>e("p",{style:{"font-size":"3rem"}},"Project Name: ",-1)),re=y(()=>e("br",null,null,-1)),le=y(()=>e("br",null,null,-1)),ce={class:"user"},ie={class:"userblock"},ue=["src"],de=y(()=>e("h1",{class:"big"},"Projects",-1)),_e=y(()=>e("i",{class:"fa-solid fa-add"},null,-1)),pe={class:"project-panel"},he={key:0,class:"blank"},me=["onClick"],fe=D({__name:"Projects",props:{language:String},setup(a){let p=_(!1),o=_({}),s=null,c=_("");const h=q(),r=A();let b=u.auth.getUser().then(t=>{t.error&&(console.clear(),r.push("/sign-up"))});!h.hash&&!b?(console.log(b),r.push("/sign-up")):(h.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:t}}=await u.auth.getUser();o.value=t})());const P=()=>{p.value=!p.value},U=async()=>{let{error:t}=await u.auth.signOut();if(t)return s="You are stuck here. No changing.",s;r.push("/")},V=async t=>{P();const i=[{uid:o.value.id,status:"owner"}],{data:k,error:m}=await u.from("Teams").insert([{team_members:i}]).select();if(m)return s="Please wait until we have a stable connection to the database.",m;const x=k[0].id,{data:f,error:v}=await u.from("Projects").insert([{name:t,type:"slide",content:{metadata:{width:"1920px",height:"1080px"},data:[[{id:"1",tag:"h1",inner_text:"hello"}]]},team_id:x}]).select();if(v)return s="Please wait until we have a stable connection to the database.",v;r.push(`/${f[0].type}/${f[0].id}`)},z=async t=>{r.push(`/${t.type}/${t.id}`)};let w=_({data:{},error:null});return(async()=>w.value=await u.from("Projects").select("name,id,type"))(),(t,i)=>{var k,m,x,f,v,C,S;return d(),g(B,null,[W(oe,{title:"New Project",opened:n(p)},{default:Y(()=>[ne,I(e("input",{type:"text",placeholder:"Untitled Project","onUpdate:modelValue":i[0]||(i[0]=l=>Q(c)?c.value=l:c=l)},null,512),[[K,n(c)]]),re,le,e("button",{class:"new bouncy",onClick:i[1]||(i[1]=l=>V(n(c)??"Untitled Project"))},"New Project!")]),_:1},8,["opened"]),e("div",ce,[e("div",ie,[e("img",{class:"profile",src:((m=(k=n(o))==null?void 0:k.user_metadata)==null?void 0:m.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,ue),e("h1",null,j(((f=(x=n(o))==null?void 0:x.user_metadata)==null?void 0:f.name)??"Loading..."),1)]),e("button",{class:"sign-out",onClick:U},"Sign Out")]),e("div",{class:"projects"},[de,e("button",{onClick:P,class:"bouncy"},[_e,G(" New Project")])]),e("div",pe,[(v=n(w))!=null&&v.data[0]?$("",!0):(d(),g("p",he,"No Projects Found... Maybe create a new one?")),(d(!0),g(B,null,H((C=n(w))==null?void 0:C.data,(l,R)=>(d(),g("div",{class:"project bouncy",style:X(`--anim-order: ${R}`),onClick:ve=>z(l)},[e("p",null,j((l==null?void 0:l.name)??"What the fuck is in ur config?"),1)],12,me))),256))]),n(s)?(d(),J(te,{key:0,msg:(S=n(w))==null?void 0:S.error},null,8,["msg"])):$("",!0)],64)}}});const we=M(fe,[["__scopeId","data-v-7a5bcdd3"]]);export{we as default};

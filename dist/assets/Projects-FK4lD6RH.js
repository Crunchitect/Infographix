import{d as M,i as h,n as O,q,s as U,v as A,a as j,b as e,x as $,t as n,y as H,j as V,g as m,_ as z,c as W,e as Y,w as G,z as s,m as J,l as B,F as D,A as K,k as Q,u as X,f as Z,B as ee,C as te,D as ae,p as oe,h as se}from"./index-r-fXDF_2.js";import{s as _}from"./supabase-_hwMxdky.js";import{E as ne}from"./ErrorBox-FNoP_GG9.js";import{g as I}from"./generate_uuid-F73_iyBE.js";const re=M({__name:"Dialogue",props:{title:String,content:String,theme:String,opened:Boolean},setup(o){const x=o,t=h(!1),l=h(!1),u=O(x,"opened"),c=()=>t.value=!t.value,r=()=>l.value=!1;return q(u,()=>{l.value=!l.value}),(w,d)=>U((m(),j("div",{class:"backdrop",onClick:V(r,["self"])},[e("div",{class:$({modal:!0,cpb:o.theme==="corporate-bullshit"})},[e("i",{class:$(["fa-solid",t.value?"fa-circle-xmark":"fa-xmark",t.value?"fa-1.5x":""]),onMouseover:c,onMouseout:c,onClick:r},null,34),e("h1",null,n(o.title),1),e("p",null,n(o.content),1),H(w.$slots,"default",{},void 0,!0)],2)],512)),[[A,l.value]])}}),le=z(re,[["__scopeId","data-v-3b57325a"]]),S=o=>(oe("data-v-99b1c370"),o=o(),se(),o),ce={style:{"font-size":"1.5rem",margin:"0"}},ie=["placeholder"],ue=S(()=>e("br",null,null,-1)),de=S(()=>e("br",null,null,-1)),pe={class:"new bouncy"},_e={class:"user"},me={class:"userblock"},he=["src"],ve={class:"projects"},fe={class:"big"},ge=S(()=>e("i",{class:"fa-solid fa-add"},null,-1)),je={class:"project-panel"},we={key:0,class:"blank"},be=["onClick"],ye=M({__name:"Projects",props:{language:String},setup(o){const x=o,t=W(()=>{switch(x.language){case"en":return{projects:"Projects",new_project:"New Project",untitled_project:"Untitled Project",loading:"Loading...",no_project:"No Projects Found... Maybe create a new one?",project_name:"Project Name",sign_out:"Sign Out"};default:return{projects:"โปรเจกต์",project_name:"โปรเจกต์ชื่อว่า...",new_project:"สร้างโปรเจกต์ใหม่",untitled_project:"ไม่มีชื่อ",loading:"โหลดอยู่ค้าบ",no_project:"ไม่มีโปรเจกต์เลย... ลองสร้างก่อนไหม :]",sign_out:"ออกละ ไม่อยู่ละ"}}});let l=h(!1),u=h({}),c=null,r=h("");const w=X(),d=Z();let R=_.auth.getUser().then(a=>{a.error&&(console.clear(),d.push("/sign-up"))});!w.hash&&!R?d.push("/sign-up"):(w.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:a}}=await _.auth.getUser();u.value=a})());const P=()=>{l.value=!l.value},E=async()=>{let{error:a}=await _.auth.signOut();if(a)return c="You are stuck here. No changing.",c;d.push("/")},F=async a=>{P();const p=[{uid:u.value.id,status:"owner"}],{data:y,error:v}=await _.from("Teams").insert([{team_members:p}]).select();if(v)return c="Please wait until we have a stable connection to the database.",v;const k=y[0].id,{data:f,error:g}=await _.from("Projects").insert([{name:a??"Untitled Project",type:"slide",content:{metadata:{width:"1920px",height:"1080px"},data:[{id:I(),content:[{id:I(),tag:"h1",content:"Hello!",position:{x:69,y:420,w:420,h:69}}]}]},team_id:k}]).select();if(g)return c="Please wait until we have a stable connection to the database.",g;d.push(`/${f[0].type}/${f[0].id}`)},T=async a=>{d.push(`/${a.type}/${a.id}`)};let b=h({data:{},error:null});return(async()=>b.value=await _.from("Projects").select("name,id,type"))(),(a,p)=>{var y,v,k,f,g,C,N;return m(),j(D,null,[Y(le,{title:t.value.new_project,opened:s(l)},{default:G(()=>[e("p",ce,n(t.value.project_name),1),e("form",{onSubmit:p[1]||(p[1]=V(i=>F(s(r)?s(r):t.value.no_project),["prevent"]))},[U(e("input",{type:"text",placeholder:t.value.untitled_project,"onUpdate:modelValue":p[0]||(p[0]=i=>te(r)?r.value=i:r=i)},null,8,ie),[[ee,s(r)]]),ue,de,e("button",pe,n(t.value.new_project+"!"),1)],32)]),_:1},8,["title","opened"]),e("div",_e,[e("div",me,[e("img",{class:"profile",src:((v=(y=s(u))==null?void 0:y.user_metadata)==null?void 0:v.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,he),e("h1",null,n(((f=(k=s(u))==null?void 0:k.user_metadata)==null?void 0:f.name)??t.value.loading),1)]),e("button",{class:"sign-out",onClick:E},n(t.value.sign_out),1)]),e("div",ve,[e("h1",fe,n(t.value.projects),1),e("button",{onClick:P,class:"bouncy"},[ge,J(" "+n(t.value.new_project),1)])]),e("div",je,[(g=s(b))!=null&&g.data[0]?B("",!0):(m(),j("p",we,n(t.value.no_project),1)),(m(!0),j(D,null,K((C=s(b))==null?void 0:C.data,(i,L)=>(m(),j("div",{class:"project bouncy",style:ae(`--anim-order: ${L}`),onClick:ke=>T(i)},[e("p",null,n((i==null?void 0:i.name)??"What the fuck is in ur config?"),1)],12,be))),256))]),s(c)?(m(),Q(ne,{key:0,msg:(N=s(b))==null?void 0:N.error},null,8,["msg"])):B("",!0)],64)}}}),Ne=z(ye,[["__scopeId","data-v-99b1c370"]]);export{Ne as default};

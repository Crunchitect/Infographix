import{d as B,l as k,u as N,e as I,o as r,c as n,a as e,m as a,t as j,j as P,F as S,q as C,i as E,s as F,p as V,b as L,k as O,_ as R}from"./index-736fcd93.js";import{s as c,E as U}from"./ErrorBox-7c1ed1df.js";const q=o=>(V("data-v-fba944a9"),o=o(),L(),o),z={class:"user"},D={class:"userblock"},M=["src"],T=q(()=>e("div",{class:"projects"},[e("h1",{class:"big"},"Projects"),e("button",null,[e("i",{class:"fa-solid fa-add"}),O(" New Project")])],-1)),W={class:"project-panel"},$={key:0,class:"blank"},A=B({__name:"Projects",props:{language:String},setup(o){let l=k({});const _=N(),u=I();let d=c.auth.getUser().then(s=>{s.error&&(console.clear(),u.push("/sign-up"))});!_.hash&&!d?(console.log(d),u.push("/sign-up")):(_.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:s}}=await c.auth.getUser();l.value=s})());const w=async()=>{let{error:s}=await c.auth.signOut();return u.push("/"),s};let t=k({data:{},error:null});return(async()=>t.value=await c.from("Projects").select("name"))(),(s,G)=>{var p,h,m,f,g,v,y,b;return r(),n(S,null,[e("div",z,[e("div",D,[e("img",{class:"profile",src:((h=(p=a(l))==null?void 0:p.user_metadata)==null?void 0:h.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,M),e("h1",null,j(((f=(m=a(l))==null?void 0:m.user_metadata)==null?void 0:f.name)??"Loading..."),1)]),e("button",{class:"sign-out",onClick:w},"Sign Out")]),T,e("div",W,[(g=a(t))!=null&&g.data[0]?P("",!0):(r(),n("p",$,"No Projects Found... Maybe create a new one?")),(r(!0),n(S,null,C((v=a(t))==null?void 0:v.data,(i,x)=>(r(),n("div",{class:"project",style:F(`--anim-order: ${x}`)},[e("p",null,j((i==null?void 0:i.name)??"What the fuck is in ur config?"),1)],4))),256))]),(y=a(t))!=null&&y.error?(r(),E(U,{key:0,msg:(b=a(t))==null?void 0:b.error},null,8,["msg"])):P("",!0)],64)}}});const K=R(A,[["__scopeId","data-v-fba944a9"]]);export{K as default};

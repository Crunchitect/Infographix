import{d as I,l as j,u as E,e as F,o as c,c as _,a as e,m as a,t as k,k as U,j as P,F as x,q as V,i as L,s as O,p as R,b as T,_ as q}from"./index-03a08847.js";import{s,E as z}from"./ErrorBox-278b4e9f.js";const S=l=>(R("data-v-6cf2948b"),l=l(),T(),l),D={class:"user"},M={class:"userblock"},W=["src"],Y=S(()=>e("h1",{class:"big"},"Projects",-1)),$=S(()=>e("i",{class:"fa-solid fa-add"},null,-1)),A={class:"project-panel"},G={key:0,class:"blank"},H=I({__name:"Projects",props:{language:String},setup(l){let i=j({}),r=null;const f=E(),p=F();let g=s.auth.getUser().then(t=>{t.error&&(console.clear(),p.push("/sign-up"))});!f.hash&&!g?(console.log(g),p.push("/sign-up")):(f.hash.slice(1).split("&")[0].split("=")[1],(async()=>{const{data:{user:t}}=await s.auth.getUser();i.value=t})());const N=async()=>{let{error:t}=await s.auth.signOut();if(t)return r="You are stuck here. No changing.",r;p.push("/")},B=async()=>{const t=[{uid:i.value.id,status:"owner"}],{data:b,error:o}=await s.from("Teams").insert([{team_members:t}]).select();if(o)return r="Please wait until we have a stable connection to the database.",o;const d=b[0].id,{data:h,error:n}=await s.from("Projects").insert([{name:"Untitled Project",type:"slide",content:{metadata:{width:"1920px",height:"1080px"},data:[[{id:"1",tag:"h1",inner_text:"hello"}]]},team_id:d}]).select();if(n)return r="Please wait until we have a stable connection to the database.",n};let u=j({data:{},error:null});return(async()=>u.value=await s.from("Projects").select("name"))(),(t,b)=>{var o,d,h,n,v,w,y;return c(),_(x,null,[e("div",D,[e("div",M,[e("img",{class:"profile",src:((d=(o=a(i))==null?void 0:o.user_metadata)==null?void 0:d.avatar_url)??"no",referrerpolicy:"no-referrer"},null,8,W),e("h1",null,k(((n=(h=a(i))==null?void 0:h.user_metadata)==null?void 0:n.name)??"Loading..."),1)]),e("button",{class:"sign-out",onClick:N},"Sign Out")]),e("div",{class:"projects"},[Y,e("button",{onClick:B},[$,U(" New Project")])]),e("div",A,[(v=a(u))!=null&&v.data[0]?P("",!0):(c(),_("p",G,"No Projects Found... Maybe create a new one?")),(c(!0),_(x,null,V((w=a(u))==null?void 0:w.data,(m,C)=>(c(),_("div",{class:"project",style:O(`--anim-order: ${C}`)},[e("p",null,k((m==null?void 0:m.name)??"What the fuck is in ur config?"),1)],4))),256))]),a(r)?(c(),L(z,{key:0,msg:(y=a(u))==null?void 0:y.error},null,8,["msg"])):P("",!0)],64)}}});const Q=q(H,[["__scopeId","data-v-6cf2948b"]]);export{Q as default};
